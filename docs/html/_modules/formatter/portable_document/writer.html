

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>formatter.portable_document.writer &mdash; XAI  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> XAI
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">XAI Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../data_module.html">Data Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../training_module.html">Model Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../inference_module.html">Explainer Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../formatter_module.html">Formatter Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../compiler_module.html">Compiler Module</a></li>
</ul>
<p class="caption"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer_guide.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../autodoc.html">XAI Auto-doc</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">XAI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>formatter.portable_document.writer</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for formatter.portable_document.writer</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1"># Copyright 2019 SAP SE or an SAP affiliate company. All rights reserved</span>
<span class="c1"># ============================================================================</span>
<span class="sd">&quot;&quot;&quot;PDF Report Formatter - Base&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">absolute_import</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>

<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">tempfile</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span>

<span class="kn">from</span> <span class="nn">xai</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">MODE</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">xai.data.constants</span> <span class="kn">import</span> <span class="n">DatetimeResolution</span>
<span class="kn">from</span> <span class="nn">xai.data.explorer</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">CategoricalStats</span><span class="p">,</span>
    <span class="n">NumericalStats</span><span class="p">,</span>
    <span class="n">TextStats</span><span class="p">,</span>
    <span class="n">DatetimeStats</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">xai.formatter.contents</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">Title</span><span class="p">,</span>
    <span class="n">SectionTitle</span><span class="p">,</span>
    <span class="n">Header</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">xai.formatter.portable_document.publisher</span> <span class="kn">import</span> <span class="n">CustomPdf</span>
<span class="kn">from</span> <span class="nn">xai.formatter.report.section</span> <span class="kn">import</span> <span class="n">OverviewSection</span><span class="p">,</span> <span class="n">DetailSection</span>
<span class="kn">from</span> <span class="nn">xai.formatter.writer</span> <span class="kn">import</span> <span class="n">Writer</span>


<span class="c1">################################################################################</span>
<span class="c1">### Pdf Writer Visitor</span>
<span class="c1">################################################################################</span>
<div class="viewcode-block" id="PdfWriter"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter">[docs]</a><span class="k">class</span> <span class="nc">PdfWriter</span><span class="p">(</span><span class="n">Writer</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;pdf_report&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                 <span class="n">path</span><span class="o">=</span><span class="s1">&#39;./&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;F&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate PDF report</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str, Optional): filename of report,</span>
<span class="sd">                        default is &#39;pdf_report&#39;</span>
<span class="sd">            path (str, Optional): output path (default current dict &#39;./&#39;)</span>
<span class="sd">            dest (str, Optional): PDF destination (default &#39;F&#39; == file)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">PdfWriter</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pdf</span> <span class="o">=</span> <span class="n">CustomPdf</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="n">dest</span><span class="p">)</span>
        <span class="c1"># default report header title is the report name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pdf</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>

        <span class="c1"># set up temporary image folder</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure_path</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span><span class="o">.</span><span class="n">name</span>

        <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure_path</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pdf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns FPDF object.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pdf</span>

<div class="viewcode-block" id="PdfWriter.out"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.out">[docs]</a>    <span class="k">def</span> <span class="nf">out</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Output PDF to some destination</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">to_file</span><span class="p">()</span>
        <span class="c1"># clean up temp folder</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure_path</span><span class="p">):</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure_path</span><span class="p">)</span></div>

<div class="viewcode-block" id="PdfWriter.build"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.build">[docs]</a>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">overview</span><span class="p">:</span> <span class="n">OverviewSection</span><span class="p">,</span>
              <span class="n">detail</span><span class="p">:</span> <span class="n">DetailSection</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">content_table</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Build Report</span>

<span class="sd">        Args:</span>
<span class="sd">            title(str): header title</span>
<span class="sd">            overview(OverviewSection): Cover Section of report</span>
<span class="sd">            detail(DetailSection): Details Section of report</span>
<span class="sd">            content_table (bool): is content table enabled</span>
<span class="sd">                            default False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_h1_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">_h2_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">_h3_count</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
        <span class="c1"># -- Draw Cover Contents --</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">overview</span><span class="o">.</span><span class="n">contents</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">content</span> <span class="ow">in</span> <span class="n">overview</span><span class="o">.</span><span class="n">contents</span><span class="p">:</span>
                <span class="n">content</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">writer</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># -- Draw Content Table --</span>
        <span class="n">dc_contents</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">detail</span><span class="o">.</span><span class="n">contents</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">content_table</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_page</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_ribbon</span><span class="p">(</span><span class="s1">&#39;Content Table&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">content</span> <span class="ow">in</span> <span class="n">dc_contents</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">SectionTitle</span><span class="p">)</span> <span class="ow">and</span> \
                    <span class="n">content</span><span class="o">.</span><span class="n">level</span> <span class="o">==</span> <span class="n">Title</span><span class="o">.</span><span class="n">SECTION_TITLE</span><span class="p">:</span>
                <span class="n">_h1_count</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">_h2_count</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">_h3_count</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">content</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">   </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">_h1_count</span><span class="p">,</span> <span class="n">content</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">content_table</span><span class="p">:</span>
                    <span class="n">content</span><span class="o">.</span><span class="n">link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_link</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">line</span><span class="o">=</span><span class="s1">&#39;&lt;B&gt;</span><span class="si">%s</span><span class="s1">&lt;/B&gt;&#39;</span> <span class="o">%</span> <span class="n">content</span><span class="o">.</span><span class="n">text</span><span class="p">,</span>
                                          <span class="n">link</span><span class="o">=</span><span class="n">content</span><span class="o">.</span><span class="n">link</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">Header</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">content</span><span class="o">.</span><span class="n">level</span> <span class="o">==</span> <span class="n">Header</span><span class="o">.</span><span class="n">LEVEL_1</span><span class="p">:</span>
                    <span class="n">_h2_count</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">_h3_count</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="n">content</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">   </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">_h1_count</span><span class="p">,</span> <span class="n">_h2_count</span><span class="p">,</span>
                                                   <span class="n">content</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">content_table</span><span class="p">:</span>
                        <span class="n">content</span><span class="o">.</span><span class="n">link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_link</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">line</span><span class="o">=</span><span class="s1">&#39;&lt;B&gt;</span><span class="si">%s</span><span class="s1">&lt;/B&gt;&#39;</span> <span class="o">%</span> <span class="n">content</span><span class="o">.</span><span class="n">text</span><span class="p">,</span>
                                              <span class="n">link</span><span class="o">=</span><span class="n">content</span><span class="o">.</span><span class="n">link</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">content</span><span class="o">.</span><span class="n">level</span> <span class="o">==</span> <span class="n">Header</span><span class="o">.</span><span class="n">LEVEL_2</span><span class="p">:</span>
                    <span class="n">_h3_count</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">content</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">   </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">_h1_count</span><span class="p">,</span> <span class="n">_h2_count</span><span class="p">,</span>
                                                      <span class="n">_h3_count</span><span class="p">,</span>
                                                      <span class="n">content</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">content_table</span><span class="p">:</span>
                        <span class="n">content</span><span class="o">.</span><span class="n">link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_link</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">line</span><span class="o">=</span><span class="s1">&#39;.. </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">content</span><span class="o">.</span><span class="n">text</span><span class="p">,</span>
                                              <span class="n">link</span><span class="o">=</span><span class="n">content</span><span class="o">.</span><span class="n">link</span><span class="p">)</span>

        <span class="c1"># -- Draw Details Contents --</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">dc_contents</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">content</span> <span class="ow">in</span> <span class="n">dc_contents</span><span class="p">:</span>
                <span class="n">content</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">writer</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="PdfWriter.add_new_page"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.add_new_page">[docs]</a>    <span class="k">def</span> <span class="nf">add_new_page</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add new page</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_page</span><span class="p">()</span></div>

<div class="viewcode-block" id="PdfWriter.draw_header"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_header">[docs]</a>    <span class="k">def</span> <span class="nf">draw_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw Header</span>

<span class="sd">        Args:</span>
<span class="sd">            text(str): header text in the report</span>
<span class="sd">            level(int): header level</span>
<span class="sd">            link: header link</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">level</span> <span class="o">==</span> <span class="n">Header</span><span class="o">.</span><span class="n">LEVEL_1</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">link</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">set_link</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">level</span> <span class="o">==</span> <span class="n">Header</span><span class="o">.</span><span class="n">LEVEL_2</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">link</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">set_link</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">level</span> <span class="o">==</span> <span class="n">Header</span><span class="o">.</span><span class="n">LEVEL_3</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">link</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">set_link</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;BI&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="PdfWriter.draw_title"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_title">[docs]</a>    <span class="k">def</span> <span class="nf">draw_title</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw Title</span>

<span class="sd">        Args:</span>
<span class="sd">            text(str): title in the report</span>
<span class="sd">            level(int): title type (section or paragraph)</span>
<span class="sd">            link: title link</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">level</span> <span class="o">==</span> <span class="n">Title</span><span class="o">.</span><span class="n">SECTION_TITLE</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">link</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">set_link</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_ribbon</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">level</span> <span class="o">==</span> <span class="n">Title</span><span class="o">.</span><span class="n">PARAGRAPH_TITLE</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">link</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">set_link</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;BI&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="PdfWriter.draw_paragraph"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_paragraph">[docs]</a>    <span class="k">def</span> <span class="nf">draw_paragraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw Paragraph</span>

<span class="sd">        Args:</span>
<span class="sd">            text(str): html text to render in the report</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">()</span></div>

    <span class="c1">################################################################################</span>
    <span class="c1">###  Basic/Reusable Section</span>
    <span class="c1">################################################################################</span>
<div class="viewcode-block" id="PdfWriter.draw_basic_key_value_pairs"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_basic_key_value_pairs">[docs]</a>    <span class="k">def</span> <span class="nf">draw_basic_key_value_pairs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                                   <span class="n">info</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw key-value pairs information to the report</span>

<span class="sd">        Args:</span>
<span class="sd">            notes(str): Explain the block</span>
<span class="sd">            info (list): list of tuple / list of (list of tuple))</span>
<span class="sd">                multi-level rendering, e.g. to display `model_info`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># -- Draw Content --</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_nested_key_value_pair</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">()</span></div>

<div class="viewcode-block" id="PdfWriter.draw_basic_table"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_basic_table">[docs]</a>    <span class="k">def</span> <span class="nf">draw_basic_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                         <span class="n">table_header</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">table_data</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
                         <span class="n">col_width</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw table to the report</span>

<span class="sd">        Args:</span>
<span class="sd">            notes(str): Explain the block</span>
<span class="sd">            table_header (list): list of str</span>
<span class="sd">            table_data (list): list of str</span>
<span class="sd">            col_width (list): list of float,</span>
<span class="sd">                default: None (evenly divided for the whole page width)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># -- Draw Content --</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">table_data</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span><span class="n">table_header</span><span class="p">,</span> <span class="n">table_data</span><span class="p">,</span>
                               <span class="n">col_width</span><span class="o">=</span><span class="n">col_width</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">()</span></div>

<div class="viewcode-block" id="PdfWriter.draw_basic_images_with_grid_spec"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_basic_images_with_grid_spec">[docs]</a>    <span class="k">def</span> <span class="nf">draw_basic_images_with_grid_spec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                                         <span class="n">image_list</span><span class="p">,</span> <span class="n">grid_spec</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw image blocks with formatted grid specification</span>

<span class="sd">        Args</span>
<span class="sd">            notes(str): Explain the block</span>
<span class="sd">            image_list (list): the list of image_paths</span>
<span class="sd">            grid_spec (dict): indicate image size and position</span>
<span class="sd">                - key: image_name, or index if image_set is a list</span>
<span class="sd">                - value: (x,y,w,h) position and weight/height of image,</span>
<span class="sd">                      with left top corner of the block as (0,0), unit in mm</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># -- Draw Content --</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">image_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_list_of_grid_images</span><span class="p">(</span><span class="n">image_list</span><span class="p">,</span> <span class="n">grid_spec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span></div>

    <span class="c1">################################################################################</span>
    <span class="c1">###  Summary Section</span>
    <span class="c1">################################################################################</span>
<div class="viewcode-block" id="PdfWriter.draw_training_time"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_training_time">[docs]</a>    <span class="k">def</span> <span class="nf">draw_training_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">timing</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw information of timing to the report</span>

<span class="sd">        Args:</span>
<span class="sd">            notes(str): Explain the block</span>
<span class="sd">            timing (:obj:`list` of :obj:`tuple`): list of tuple</span>
<span class="sd">                        (name, time in second)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">datetime</span>
        <span class="c1"># -- Draw Content --</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;BI&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">start_itemize</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">time_in_sec</span> <span class="ow">in</span> <span class="n">timing</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_key_value_pair</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                                        <span class="n">value</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span>
                                            <span class="n">seconds</span><span class="o">=</span><span class="n">time_in_sec</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">end_itemize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">()</span></div>

<div class="viewcode-block" id="PdfWriter.draw_data_set_summary"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_data_set_summary">[docs]</a>    <span class="k">def</span> <span class="nf">draw_data_set_summary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                              <span class="n">data_summary</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw information of dataset summary to the report</span>

<span class="sd">        Args:</span>
<span class="sd">            notes(str): Explain the block</span>
<span class="sd">            data_summary (:obj:`list` of :obj:`tuple`): list of tuple</span>
<span class="sd">                        (dataset_name, dataset_sample_number)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># -- Draw Content --</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;BI&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">start_itemize</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">quantity</span> <span class="ow">in</span> <span class="n">data_summary</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_key_value_pair</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;Number of </span><span class="si">%s</span><span class="s2"> samples&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">,</span>
                                        <span class="n">value</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">quantity</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">end_itemize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">()</span></div>

<div class="viewcode-block" id="PdfWriter.draw_evaluation_result_summary"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_evaluation_result_summary">[docs]</a>    <span class="k">def</span> <span class="nf">draw_evaluation_result_summary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                                       <span class="n">evaluation_result</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw information of training performance to the result</span>

<span class="sd">        Args:</span>
<span class="sd">            evaluation_result (dict): evaluation metric</span>
<span class="sd">                - key: metric_name</span>
<span class="sd">                - value: metric_value: single float value for average/overall metric,</span>
<span class="sd">                                        list for class metrics</span>
<span class="sd">                sample input 1: {&#39;precision&#39;: 0.5}, report value directly</span>
<span class="sd">                sample input 2: {&#39;precision&#39;: {&#39;class&#39;:[0.5,0.4,0.3],&#39;average&#39;:0.5}},</span>
<span class="sd">                                            report &quot;average&quot; value</span>
<span class="sd">                sample input 3: {&#39;precision&#39;: {&#39;class&#39;:[0.5,0.4,0.3]},</span>
<span class="sd">                                    report unweighted average for &quot;class&quot; value</span>
<span class="sd">            notes (str, Optional): explain the block</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
        <span class="c1"># -- Draw Content --</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;BI&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">evaluation_result</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">start_itemize</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">metric_name</span><span class="p">,</span> <span class="n">metric_value</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">valid</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">metric_value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">:</span>
                    <span class="k">if</span> <span class="s1">&#39;average&#39;</span> <span class="ow">in</span> <span class="n">metric_value</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="n">key</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> (average)&quot;</span> <span class="o">%</span> <span class="n">metric_name</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">metric_value</span><span class="p">[</span><span class="s1">&#39;average&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="nb">float</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span>
                                <span class="n">metric_value</span><span class="p">[</span><span class="s1">&#39;average&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                            <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%.4f</span><span class="s2"> &quot;</span> <span class="o">%</span> <span class="n">metric_value</span><span class="p">[</span><span class="s1">&#39;average&#39;</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="s1">&#39;class&#39;</span> <span class="ow">in</span> <span class="n">metric_value</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="n">key</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> (macro average)&quot;</span> <span class="o">%</span> <span class="n">metric_name</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">metric_value</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
                            <span class="n">valid</span> <span class="o">=</span> <span class="kc">True</span>
                            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">metric_value</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]:</span>
                                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">float</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
                                    <span class="n">valid</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">valid</span><span class="p">:</span>
                            <span class="k">continue</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%.4f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span>
                            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">metric_value</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s1">&#39;No defined keys (`class`,`average`) found in &#39;</span> \
                             <span class="s1">&#39;metric value: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">metric_value</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
                        <span class="k">continue</span>

                <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">metric_value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">float</span><span class="p">:</span>
                    <span class="n">key</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">metric_name</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%.4f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">metric_value</span>
                <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">metric_value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                    <span class="n">key</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">metric_name</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">metric_value</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s1">&#39;Unsupported metric value type for metric (</span><span class="si">%s</span><span class="s1">): </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="n">metric_name</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">metric_value</span><span class="p">)))</span>
                    <span class="k">continue</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_key_value_pair</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">end_itemize</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">()</span></div>

<div class="viewcode-block" id="PdfWriter.draw_model_info_summary"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_model_info_summary">[docs]</a>    <span class="k">def</span> <span class="nf">draw_model_info_summary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">model_info</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw information of model info to the result</span>

<span class="sd">        Args:</span>
<span class="sd">            model_info (:obj:`list` of :obj:</span>
<span class="sd">              `tuple`, Optional): list of tuple (model info attribute, model info value).</span>
<span class="sd">               Default information include `use case name`, `version`, `use case team`.</span>
<span class="sd">            notes (str, Optional): explain the block</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># -- Draw Content --</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;BI&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">start_itemize</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">attribute</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">model_info</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_key_value_pair</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">end_itemize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">()</span></div>

    <span class="c1">################################################################################</span>
    <span class="c1">###  Data Section</span>
    <span class="c1">################################################################################</span>
<div class="viewcode-block" id="PdfWriter.draw_data_missing_value"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_data_missing_value">[docs]</a>    <span class="k">def</span> <span class="nf">draw_data_missing_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">missing_count</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
                                <span class="n">total_count</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">ratio</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw Missing Data Value Summary Table</span>

<span class="sd">        Args:</span>
<span class="sd">            notes(str): Summary Notes</span>
<span class="sd">            missing_count(dict): Missing Count</span>
<span class="sd">            total_count(dict): Total Count</span>
<span class="sd">            ratio(bool): True if `missing_value` is the percentage</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
        <span class="k">def</span> <span class="nf">get_missing_data_info</span><span class="p">():</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Build missing data summary</span>
<span class="sd">            Returns: Missing data summary</span>
<span class="sd">                table_header (list):</span>
<span class="sd">                table_data (list):</span>
<span class="sd">                col_width (list):</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">data_dict</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
            <span class="n">field_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">total_count</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">field_set</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">missing_count</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
            <span class="k">for</span> <span class="n">feature_name</span> <span class="ow">in</span> <span class="n">field_set</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">feature_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">total_count</span><span class="p">:</span>
                    <span class="n">data_dict</span><span class="p">[</span><span class="n">feature_name</span><span class="p">][</span><span class="s1">&#39;total_count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">data_dict</span><span class="p">[</span><span class="n">feature_name</span><span class="p">][</span><span class="s1">&#39;total_count&#39;</span><span class="p">]</span> <span class="o">=</span> \
                        <span class="n">total_count</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">feature_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">missing_count</span><span class="p">:</span>
                    <span class="n">data_dict</span><span class="p">[</span><span class="n">feature_name</span><span class="p">][</span><span class="s1">&#39;missing_value_count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="n">data_dict</span><span class="p">[</span><span class="n">feature_name</span><span class="p">][</span><span class="s1">&#39;percentage&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">ratio</span><span class="p">:</span>
                        <span class="n">data_dict</span><span class="p">[</span><span class="n">feature_name</span><span class="p">][</span><span class="s1">&#39;percentage&#39;</span><span class="p">]</span> <span class="o">=</span> \
                            <span class="n">missing_count</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span>
                        <span class="n">data_dict</span><span class="p">[</span><span class="n">feature_name</span><span class="p">][</span><span class="s1">&#39;missing_value_count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">data_dict</span><span class="p">[</span><span class="n">feature_name</span><span class="p">][</span><span class="s1">&#39;missing_value_count&#39;</span><span class="p">]</span> <span class="o">=</span> \
                            <span class="n">missing_count</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">data_dict</span><span class="p">[</span><span class="n">feature_name</span><span class="p">][</span><span class="s1">&#39;total_count&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;-&#39;</span><span class="p">:</span>
                            <span class="n">data_dict</span><span class="p">[</span><span class="n">feature_name</span><span class="p">][</span><span class="s1">&#39;percentage&#39;</span><span class="p">]</span> <span class="o">=</span> \
                                <span class="n">data_dict</span><span class="p">[</span><span class="n">feature_name</span><span class="p">][</span>
                                    <span class="s1">&#39;missing_value_count&#39;</span><span class="p">]</span> <span class="o">/</span> \
                                <span class="n">data_dict</span><span class="p">[</span><span class="n">feature_name</span><span class="p">][</span><span class="s1">&#39;total_count&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">total_count</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">table_header</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Feature&#39;</span><span class="p">,</span> <span class="s1">&#39;Count&#39;</span><span class="p">,</span>
                                <span class="s1">&#39;Percentage&#39;</span><span class="p">]</span>
                <span class="n">table_data</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_data</span> <span class="ow">in</span> <span class="n">data_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">table_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="p">[</span><span class="n">field_name</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">45</span> <span class="k">else</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_~&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">field_name</span><span class="p">[:</span><span class="mi">45</span><span class="p">]),</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> / </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">field_data</span><span class="p">[</span><span class="s1">&#39;missing_value_count&#39;</span><span class="p">],</span>
                            <span class="n">field_data</span><span class="p">[</span><span class="s1">&#39;total_count&#39;</span><span class="p">]),</span>
                         <span class="s2">&quot;</span><span class="si">%.2f%%</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_data</span><span class="p">[</span><span class="s1">&#39;percentage&#39;</span><span class="p">]])</span>
                <span class="n">col_width</span> <span class="o">=</span> <span class="p">[</span><span class="mi">130</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">25</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">ratio</span><span class="p">:</span>
                    <span class="n">table_header</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Feature&#39;</span><span class="p">,</span> <span class="s1">&#39;Percentage&#39;</span><span class="p">]</span>
                    <span class="n">table_data</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_data</span> <span class="ow">in</span> <span class="n">data_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="n">table_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                            <span class="p">[</span><span class="n">field_name</span><span class="p">,</span> <span class="n">field_data</span><span class="p">[</span><span class="s1">&#39;percentage&#39;</span><span class="p">]])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">table_header</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Feature&#39;</span><span class="p">,</span> <span class="s1">&#39;Count&#39;</span><span class="p">]</span>
                    <span class="n">table_data</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_data</span> <span class="ow">in</span> <span class="n">data_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="n">table_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                            <span class="p">[</span><span class="n">field_name</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">55</span> <span class="k">else</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_~&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">field_name</span><span class="p">[:</span><span class="mi">55</span><span class="p">]),</span>
                             <span class="n">field_data</span><span class="p">[</span><span class="s1">&#39;missing_value_count&#39;</span><span class="p">]])</span>
                <span class="n">col_width</span> <span class="o">=</span> <span class="p">[</span><span class="mi">155</span><span class="p">,</span> <span class="mi">25</span><span class="p">]</span>

            <span class="k">return</span> <span class="n">table_header</span><span class="p">,</span> <span class="n">table_data</span><span class="p">,</span> <span class="n">col_width</span>

        <span class="c1"># -- Draw Content --</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
        <span class="n">_table_header</span><span class="p">,</span> <span class="n">_table_data</span><span class="p">,</span> <span class="n">_col_width</span> <span class="o">=</span> <span class="n">get_missing_data_info</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">_table_data</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span><span class="n">_table_header</span><span class="p">,</span> <span class="n">_table_data</span><span class="p">,</span>
                               <span class="n">col_width</span><span class="o">=</span><span class="n">_col_width</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">()</span></div>

<div class="viewcode-block" id="PdfWriter.draw_data_set_distribution"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_data_set_distribution">[docs]</a>    <span class="k">def</span> <span class="nf">draw_data_set_distribution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                                   <span class="n">data_set_distribution</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">],</span>
                                   <span class="n">max_class_shown</span><span class="o">=</span><span class="mi">20</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw information of distribution on data set</span>

<span class="sd">        Args:</span>
<span class="sd">            notes(str): Explain the block</span>
<span class="sd">            data_set_distribution (tuple: (str,dict)):</span>
<span class="sd">                - tuple[0] str: label/split name</span>
<span class="sd">                - tuple[1] dict: key: class name, value: class count</span>
<span class="sd">            max_class_shown (int, Optional): maximum number of classes shown</span>
<span class="sd">                          in the figure, default is 20</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">xai.graphs</span> <span class="kn">import</span> <span class="n">graph_generator</span>
        <span class="k">def</span> <span class="nf">get_data_set_distribution</span><span class="p">():</span>
            <span class="n">table_header</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Count&#39;</span><span class="p">,</span> <span class="s1">&#39;Distribution&#39;</span><span class="p">]</span>
            <span class="n">table_data</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">dataset_name</span><span class="p">,</span> <span class="n">dataset_dist</span> <span class="ow">in</span> <span class="n">data_set_distribution</span><span class="p">:</span>
                <span class="n">table_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="p">[</span><span class="n">dataset_name</span><span class="p">,</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">dataset_dist</span><span class="o">.</span><span class="n">values</span><span class="p">())),</span>
                     <span class="s1">&#39;See below graphs&#39;</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">table_header</span><span class="p">,</span> <span class="n">table_data</span><span class="p">,</span> <span class="p">[</span><span class="mi">80</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">60</span><span class="p">]</span>

        <span class="c1"># -- Draw Content --</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
        <span class="n">_table_header</span><span class="p">,</span> <span class="n">_table_data</span><span class="p">,</span> <span class="n">_col_width</span> <span class="o">=</span> <span class="n">get_data_set_distribution</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span><span class="n">_table_header</span><span class="p">,</span> <span class="n">_table_data</span><span class="p">,</span> <span class="n">col_width</span><span class="o">=</span><span class="n">_col_width</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">_dataset_name</span><span class="p">,</span> <span class="n">_dataset_dist</span> <span class="ow">in</span> <span class="n">data_set_distribution</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="s1">&#39;Distribution for &lt;B&gt;</span><span class="si">%s</span><span class="s1">&lt;/B&gt;&#39;</span> <span class="o">%</span> <span class="n">_dataset_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">_dataset_dist</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">max_class_shown</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="s1">&#39;(Only </span><span class="si">%s</span><span class="s1"> shown amount </span><span class="si">%s</span><span class="s1"> classes)&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">max_class_shown</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">_dataset_dist</span><span class="p">)))</span>
            <span class="n">image_path</span> <span class="o">=</span> <span class="n">graph_generator</span><span class="o">.</span><span class="n">BarPlot</span><span class="p">(</span>
                <span class="n">file_path</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">_data_distribution.png&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure_path</span><span class="p">,</span>
                                                           <span class="n">_dataset_name</span><span class="p">),</span>
                <span class="n">data</span><span class="o">=</span><span class="n">_dataset_dist</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Data Distribution for </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">_dataset_name</span><span class="p">,</span>
                <span class="n">x_label</span><span class="o">=</span><span class="s1">&#39;Number of samples&#39;</span><span class="p">,</span>
                <span class="n">y_label</span><span class="o">=</span><span class="s1">&#39;Category&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">caption</span><span class="o">=</span><span class="n">_dataset_name</span><span class="p">,</span>
                                         <span class="n">ratio</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                         <span class="n">limit_length</span><span class="o">=</span><span class="n">max_class_shown</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_large_image</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span></div>

<div class="viewcode-block" id="PdfWriter.draw_data_attributes"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_data_attributes">[docs]</a>    <span class="k">def</span> <span class="nf">draw_data_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">data_attribute</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw information of data attribute for data fields to the report</span>

<span class="sd">        Args:</span>
<span class="sd">            notes(str): Explain the block</span>
<span class="sd">            data_attribute (:dict of :dict):</span>
<span class="sd">                -key: data field name</span>
<span class="sd">                -value: attributes (dict)</span>
<span class="sd">                    - key: attribute name</span>
<span class="sd">                    - value: attribute value</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">get_data_attributes</span><span class="p">():</span>
            <span class="n">attribute_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                <span class="nb">set</span><span class="p">()</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="nb">set</span><span class="p">(</span><span class="n">attribute_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                              <span class="k">for</span> <span class="n">attribute_dict</span> <span class="ow">in</span> <span class="n">data_attribute</span><span class="o">.</span><span class="n">values</span><span class="p">()]))</span>
            <span class="n">table_header</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Field Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">attribute</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
                                             <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">attribute_list</span><span class="p">]</span>

            <span class="n">table_data</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_attributes</span> <span class="ow">in</span> <span class="n">data_attribute</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">row</span> <span class="o">=</span> <span class="p">[</span><span class="n">field_name</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">40</span> <span class="k">else</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_~&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">field_name</span><span class="p">[:</span><span class="mi">40</span><span class="p">])]</span>
                <span class="k">for</span> <span class="n">attribute_name</span> <span class="ow">in</span> <span class="n">attribute_list</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">attribute_name</span> <span class="ow">in</span> <span class="n">field_attributes</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">field_attributes</span><span class="p">[</span><span class="n">attribute_name</span><span class="p">])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
                <span class="n">table_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">table_header</span><span class="p">,</span> <span class="n">table_data</span>

        <span class="c1"># -- Draw Content --</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
        <span class="n">_table_header</span><span class="p">,</span> <span class="n">_table_data</span> <span class="o">=</span> <span class="n">get_data_attributes</span><span class="p">()</span>
        <span class="n">col_width</span> <span class="o">=</span> <span class="p">[</span><span class="mi">180</span> <span class="o">-</span> <span class="mi">22</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">_table_header</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">22</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">_table_header</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span><span class="n">_table_header</span><span class="p">,</span> <span class="n">_table_data</span><span class="p">,</span> <span class="n">col_width</span><span class="o">=</span><span class="n">col_width</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">()</span></div>

<div class="viewcode-block" id="PdfWriter.draw_categorical_field_distribution"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_categorical_field_distribution">[docs]</a>    <span class="k">def</span> <span class="nf">draw_categorical_field_distribution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                                            <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                                            <span class="n">field_distribution</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">CategoricalStats</span><span class="p">],</span>
                                            <span class="n">max_values_display</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
                                            <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw information of field value distribution for categorical type to</span>
<span class="sd">        the report.</span>
<span class="sd">        Details see analyzers inside `xai.data_explorer.categorical_analyzer`</span>

<span class="sd">       Args:</span>
<span class="sd">            notes(str): Explain the block</span>
<span class="sd">            field_name (str): data field name</span>
<span class="sd">            field_distribution (:dict of :CategoricalStats):</span>
<span class="sd">                -key: label_name</span>
<span class="sd">                -value: CategoricalStats object</span>
<span class="sd">            max_values_display (int): maximum number of values displayed</span>
<span class="sd">            colors (list): the list of color code for rendering different class</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">xai.graphs</span> <span class="kn">import</span> <span class="n">graph_generator</span>
        <span class="k">if</span> <span class="n">colors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Blues_d&quot;</span><span class="p">,</span> <span class="s2">&quot;Reds_d&quot;</span><span class="p">,</span> <span class="s2">&quot;Greens_d&quot;</span><span class="p">,</span> <span class="s2">&quot;Purples_d&quot;</span><span class="p">,</span>
                      <span class="s2">&quot;Oranges_d&quot;</span><span class="p">]</span>
        <span class="c1"># -- Draw Content --</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">start_itemize</span><span class="p">(</span><span class="s1">&#39; - &#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="p">(</span><span class="n">label_name</span><span class="p">,</span> <span class="n">cat_stats</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
                <span class="n">field_distribution</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="n">frequency_distribution</span> <span class="o">=</span> <span class="n">cat_stats</span><span class="o">.</span><span class="n">frequency_count</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">frequency_distribution</span><span class="p">)</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span>
                    <span class="n">frequency_distribution</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">start_itemize</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span>
                    <span class="s1">&#39;Warning: </span><span class="si">%s</span><span class="s1"> unique values found in </span><span class="si">%s</span><span class="s1"> samples.&#39;</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="nb">len</span><span class="p">(</span><span class="n">frequency_distribution</span><span class="p">),</span>
                        <span class="nb">sum</span><span class="p">(</span><span class="n">frequency_distribution</span><span class="o">.</span><span class="n">values</span><span class="p">())))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">end_itemize</span><span class="p">()</span>
                <span class="k">break</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">field_distribution</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">max_values_display</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> of </span><span class="si">%s</span><span class="s1"> are displayed)&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">max_values_display</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">field_distribution</span><span class="p">)))</span>

            <span class="n">figure_path</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">_</span><span class="si">%s</span><span class="s1">_field_distribution.png&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">figure_path</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">label_name</span><span class="p">)</span>
            <span class="n">image_path</span> <span class="o">=</span> <span class="n">graph_generator</span><span class="o">.</span><span class="n">BarPlot</span><span class="p">(</span><span class="n">file_path</span><span class="o">=</span><span class="n">figure_path</span><span class="p">,</span>
                                                 <span class="n">data</span><span class="o">=</span><span class="n">frequency_distribution</span><span class="p">,</span>
                                                 <span class="n">title</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                                 <span class="n">x_label</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                                 <span class="n">y_label</span><span class="o">=</span><span class="n">field_name</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span>
                <span class="n">limit_length</span><span class="o">=</span><span class="n">max_values_display</span><span class="p">,</span>
                <span class="n">color_palette</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">idx</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_large_image</span><span class="p">(</span><span class="n">image_path</span><span class="o">=</span><span class="n">image_path</span><span class="p">,</span>
                                     <span class="n">caption</span><span class="o">=</span><span class="s1">&#39;For </span><span class="si">%s</span><span class="s1"> samples&#39;</span> <span class="o">%</span> <span class="n">label_name</span><span class="p">,</span>
                                     <span class="n">style</span><span class="o">=</span><span class="s1">&#39;I&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">end_itemize</span><span class="p">()</span></div>

<div class="viewcode-block" id="PdfWriter.draw_numeric_field_distribution"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_numeric_field_distribution">[docs]</a>    <span class="k">def</span> <span class="nf">draw_numeric_field_distribution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                                        <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                                        <span class="n">field_distribution</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">NumericalStats</span><span class="p">],</span>
                                        <span class="n">force_no_log</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                        <span class="n">x_limit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                        <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">         Draw information of field value distribution for numerical type to</span>
<span class="sd">         the report.</span>

<span class="sd">         Args:</span>
<span class="sd">             notes(str): Explain the block</span>
<span class="sd">             field_name (str): data field name</span>
<span class="sd">             field_distribution (:dict of :dict):</span>
<span class="sd">                 -key: label_name</span>
<span class="sd">                 -value: numeric statistics object</span>

<span class="sd">             force_no_log (bool): whether to change y-scale to logrithmic</span>
<span class="sd">                                              scale for a more balanced view</span>
<span class="sd">             x_limit (list:): whether x-axis only display the required percentile range.</span>
<span class="sd">                             If True, field_distribution should have a</span>
<span class="sd">                             key &quot;x_limit&quot; and value of [x_min, x_max].</span>
<span class="sd">             colors (list): the list of color code for rendering different class</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">xai.graphs</span> <span class="kn">import</span> <span class="n">graph_generator</span>
        <span class="kn">from</span> <span class="nn">xai.graphs.format_contants</span> <span class="kn">import</span> <span class="n">IMAGE_TABLE_GRID_SPEC_NEW</span>
        <span class="k">if</span> <span class="n">colors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;#3498db&quot;</span><span class="p">,</span> <span class="s2">&quot;#2ecc71&quot;</span><span class="p">,</span> <span class="s2">&quot;#e74c3c&quot;</span><span class="p">]</span>
        <span class="c1"># -- Draw Content --</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">start_itemize</span><span class="p">(</span><span class="s1">&#39; - &#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="p">(</span><span class="n">label_name</span><span class="p">,</span> <span class="n">num_stats</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
                <span class="n">field_distribution</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="n">figure_path</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">_</span><span class="si">%s</span><span class="s1">_field_distribution.png&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">figure_path</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">label_name</span><span class="p">)</span>
            <span class="n">figure_path</span> <span class="o">=</span> <span class="n">graph_generator</span><span class="o">.</span><span class="n">KdeDistribution</span><span class="p">(</span>
                <span class="n">figure_path</span><span class="o">=</span><span class="n">figure_path</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">num_stats</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="n">x_label</span><span class="o">=</span><span class="n">field_name</span><span class="p">,</span>
                <span class="n">y_label</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span>
                <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">idx</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)],</span>
                <span class="n">force_no_log</span><span class="o">=</span><span class="n">force_no_log</span><span class="p">,</span>
                <span class="n">x_limit</span><span class="o">=</span><span class="n">x_limit</span><span class="p">)</span>
            <span class="n">table_header</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Statistical Field&#39;</span><span class="p">,</span> <span class="s1">&#39;Value&#39;</span><span class="p">]</span>
            <span class="n">table_values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
            <span class="n">table_values</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;Total valid count&#39;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_stats</span><span class="o">.</span><span class="n">total_count</span><span class="p">)])</span>
            <span class="n">table_values</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;Min&#39;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_stats</span><span class="o">.</span><span class="n">min</span><span class="p">)])</span>
            <span class="n">table_values</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;Max&#39;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_stats</span><span class="o">.</span><span class="n">max</span><span class="p">)])</span>
            <span class="n">table_values</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;Mean&#39;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_stats</span><span class="o">.</span><span class="n">mean</span><span class="p">)])</span>
            <span class="n">table_values</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;Median&#39;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_stats</span><span class="o">.</span><span class="n">median</span><span class="p">)])</span>
            <span class="n">table_values</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;Standard deviation&#39;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_stats</span><span class="o">.</span><span class="n">sd</span><span class="p">)])</span>
            <span class="n">table_values</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;NAN count&#39;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_stats</span><span class="o">.</span><span class="n">nan_count</span><span class="p">)])</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_table_image_group</span><span class="p">(</span><span class="n">image_path</span><span class="o">=</span><span class="n">figure_path</span><span class="p">,</span>
                                           <span class="n">table_header</span><span class="o">=</span><span class="n">table_header</span><span class="p">,</span>
                                           <span class="n">table_content</span><span class="o">=</span><span class="n">table_values</span><span class="p">,</span>
                                           <span class="n">grid_spec</span><span class="o">=</span><span class="n">IMAGE_TABLE_GRID_SPEC_NEW</span><span class="p">,</span>
                                           <span class="n">caption</span><span class="o">=</span><span class="s1">&#39;Distribution for </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">label_name</span><span class="p">,</span>
                                           <span class="n">style</span><span class="o">=</span><span class="s1">&#39;I&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">end_itemize</span><span class="p">()</span></div>

<div class="viewcode-block" id="PdfWriter.draw_text_field_distribution"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_text_field_distribution">[docs]</a>    <span class="k">def</span> <span class="nf">draw_text_field_distribution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                                     <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                                     <span class="n">field_distribution</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">TextStats</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw information of field value distribution for text type to the</span>
<span class="sd">        report.</span>

<span class="sd">        Args:</span>
<span class="sd">            notes(str): Explain the block</span>
<span class="sd">            field_name (str): data field name</span>
<span class="sd">            field_distribution (:dict of :dict):</span>
<span class="sd">                -key: label_name</span>
<span class="sd">                -value: TextStats</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">xai.graphs</span> <span class="kn">import</span> <span class="n">graph_generator</span>
        <span class="kn">from</span> <span class="nn">xai.graphs.format_contants</span> <span class="kn">import</span> <span class="n">IMAGE_TABLE_GRID_SPEC_NEW</span>
        <span class="c1"># -- Draw Content --</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">start_itemize</span><span class="p">(</span><span class="s1">&#39; - &#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="p">(</span><span class="n">label_name</span><span class="p">,</span> <span class="n">text_stats</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
                <span class="n">field_distribution</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="n">tfidf</span> <span class="o">=</span> <span class="n">text_stats</span><span class="o">.</span><span class="n">tfidf</span>
            <span class="n">tfidf</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">value</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">tfidf</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">}</span>
            <span class="n">pattern_stats</span> <span class="o">=</span> <span class="n">text_stats</span><span class="o">.</span><span class="n">pattern_stats</span>
            <span class="n">figure_path</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">_</span><span class="si">%s</span><span class="s1">_field_distribution.png&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">figure_path</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">label_name</span><span class="p">)</span>
            <span class="n">figure_path</span> <span class="o">=</span> <span class="n">graph_generator</span><span class="o">.</span><span class="n">WordCloudGraph</span><span class="p">(</span>
                <span class="n">figure_path</span><span class="o">=</span><span class="n">figure_path</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">tfidf</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
            <span class="n">table_header</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Placeholder&#39;</span><span class="p">,</span> <span class="s1">&#39;Doc Percentage &#39;</span><span class="p">]</span>
            <span class="n">table_values</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">w</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">pattern_stats</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">table_values</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">w</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%.2f%%</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)])</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">table_values</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_large_image</span><span class="p">(</span><span class="n">image_path</span><span class="o">=</span><span class="n">figure_path</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_table_image_group</span><span class="p">(</span><span class="n">image_path</span><span class="o">=</span><span class="n">figure_path</span><span class="p">,</span>
                                               <span class="n">table_header</span><span class="o">=</span><span class="n">table_header</span><span class="p">,</span>
                                               <span class="n">table_content</span><span class="o">=</span><span class="n">table_values</span><span class="p">,</span>
                                               <span class="n">grid_spec</span><span class="o">=</span><span class="n">IMAGE_TABLE_GRID_SPEC_NEW</span><span class="p">,</span>
                                               <span class="n">caption</span><span class="o">=</span><span class="s1">&#39;Distribution for </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">label_name</span><span class="p">,</span>
                                               <span class="n">style</span><span class="o">=</span><span class="s1">&#39;I&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">end_itemize</span><span class="p">()</span></div>

<div class="viewcode-block" id="PdfWriter.draw_datetime_field_distribution"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_datetime_field_distribution">[docs]</a>    <span class="k">def</span> <span class="nf">draw_datetime_field_distribution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                                         <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                                         <span class="n">field_distribution</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">DatetimeStats</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw information of field value distribution for datetime type to the</span>
<span class="sd">        report.</span>

<span class="sd">        Args:</span>
<span class="sd">            notes(str): Explain the block</span>
<span class="sd">            field_name (str): data field name</span>
<span class="sd">            field_distribution (:dict of :dict):</span>
<span class="sd">                -key: label_name</span>
<span class="sd">                -value (:dict of :DatetimeStats): only support resolution_list size of 2</span>
<span class="sd">                    - 1st level key: year_X(int)</span>
<span class="sd">                    - 1st level value:</span>
<span class="sd">                        - 2nd level key: month_X(int)</span>
<span class="sd">                        - 2nd level value: count of sample in month_X of year_X</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">xai.graphs</span> <span class="kn">import</span> <span class="n">graph_generator</span>
        <span class="c1"># -- Draw Content --</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">start_itemize</span><span class="p">(</span><span class="s1">&#39; - &#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="p">(</span><span class="n">label_name</span><span class="p">,</span> <span class="n">datetime_stats</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
                <span class="n">field_distribution</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="k">if</span> <span class="n">datetime_stats</span><span class="o">.</span><span class="n">resolution_list</span> <span class="o">!=</span> <span class="p">[</span><span class="n">DatetimeResolution</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span> <span class="n">DatetimeResolution</span><span class="o">.</span><span class="n">MONTH</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Resolution list should be [year, month].&#39;</span><span class="p">)</span>
            <span class="n">figure_path</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">_</span><span class="si">%s</span><span class="s1">_field_distribution.png&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">figure_path</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">label_name</span><span class="p">)</span>
            <span class="n">figure_path</span> <span class="o">=</span> <span class="n">graph_generator</span><span class="o">.</span><span class="n">DatePlot</span><span class="p">(</span><span class="n">figure_path</span><span class="o">=</span><span class="n">figure_path</span><span class="p">,</span>
                                                   <span class="n">data</span><span class="o">=</span><span class="n">datetime_stats</span><span class="o">.</span><span class="n">frequency_count</span><span class="p">,</span>
                                                   <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Datetime &#39;</span>
                                                         <span class="s1">&#39;distribution for </span><span class="si">%s</span><span class="s1"> (for </span><span class="si">%s</span><span class="s1"> samples) &#39;</span> <span class="o">%</span> <span class="p">(</span>
                                                             <span class="n">field_name</span><span class="p">,</span>
                                                             <span class="n">label_name</span><span class="p">),</span>
                                                   <span class="n">x_label</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                                   <span class="n">y_label</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_large_image</span><span class="p">(</span><span class="n">image_path</span><span class="o">=</span><span class="n">figure_path</span><span class="p">,</span>
                                     <span class="n">caption</span><span class="o">=</span><span class="s1">&#39;Distribution for </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span>
                                             <span class="n">label_name</span><span class="p">,</span>
                                     <span class="n">style</span><span class="o">=</span><span class="s1">&#39;I&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">end_itemize</span><span class="p">()</span></div>

    <span class="c1">################################################################################</span>
    <span class="c1">###  Feature Section</span>
    <span class="c1">################################################################################</span>
<div class="viewcode-block" id="PdfWriter.draw_feature_importance"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_feature_importance">[docs]</a>    <span class="k">def</span> <span class="nf">draw_feature_importance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                                <span class="n">importance_ranking</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">],</span>
                                <span class="n">importance_threshold</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                                <span class="n">maximum_number_feature</span><span class="o">=</span><span class="mi">20</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add information of feature importance to the report.</span>

<span class="sd">        Args:</span>
<span class="sd">            notes(str): Explain the block</span>
<span class="sd">            importance_ranking(:list of :list): a list of 2-item lists,</span>
<span class="sd">                                        item[0]: score, item[1] feature_name</span>
<span class="sd">            importance_threshold(float): threshold for displaying the feature</span>
<span class="sd">                                        name and score in tables</span>
<span class="sd">            maximum_number_feature(int): maximum number of features shown in bar-chart diagram</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">xai.graphs</span> <span class="kn">import</span> <span class="n">graph_generator</span>
        <span class="n">image_path</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/feature_importance.png&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure_path</span>
        <span class="n">image_path</span> <span class="o">=</span> <span class="n">graph_generator</span><span class="o">.</span><span class="n">FeatureImportance</span><span class="p">(</span><span class="n">figure_path</span><span class="o">=</span><span class="n">image_path</span><span class="p">,</span>
                                                       <span class="n">data</span><span class="o">=</span><span class="n">importance_ranking</span><span class="p">,</span>
                                                       <span class="n">title</span><span class="o">=</span><span class="s1">&#39;feature_importance&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span>
            <span class="n">limit_length</span><span class="o">=</span><span class="n">maximum_number_feature</span><span class="p">)</span>

        <span class="c1"># -- Draw Content --</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">notes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">maximum_number_feature</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">importance_ranking</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span>
                <span class="s2">&quot;The figure below shows the top </span><span class="si">%s</span><span class="s2"> important features for the trained model.&quot;</span>
                <span class="o">%</span> <span class="n">maximum_number_feature</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span>
                <span class="s2">&quot;The figure below shows importance ranking for all features from the trained model.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_large_image</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span>
            <span class="s2">&quot;The features which have an importance score larger than </span><span class="si">%s</span><span class="s2"> are listed in the below table.&quot;</span> <span class="o">%</span>
            <span class="n">importance_threshold</span><span class="p">)</span>

        <span class="n">table_header</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Feature&#39;</span><span class="p">,</span> <span class="s1">&#39;Importance&#39;</span><span class="p">]</span>
        <span class="n">table_data</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">feature_name</span><span class="p">,</span> <span class="n">importance</span> <span class="ow">in</span> <span class="n">importance_ranking</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">float</span><span class="p">(</span><span class="n">importance</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">importance_threshold</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">table_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">[</span><span class="n">feature_name</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">feature_name</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">50</span> <span class="k">else</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_~&quot;</span> <span class="o">%</span> <span class="n">feature_name</span><span class="p">[:</span><span class="mi">50</span><span class="p">],</span> <span class="nb">round</span><span class="p">(</span><span class="n">importance</span><span class="p">,</span> <span class="mi">10</span><span class="p">)])</span>
            <span class="c1">#</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span><span class="n">header</span><span class="o">=</span><span class="n">table_header</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">table_data</span><span class="p">,</span>
                           <span class="n">col_width</span><span class="o">=</span><span class="p">[</span><span class="mi">140</span><span class="p">,</span> <span class="mi">30</span><span class="p">])</span></div>

<div class="viewcode-block" id="PdfWriter.draw_feature_shap_values"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_feature_shap_values">[docs]</a>    <span class="k">def</span> <span class="nf">draw_feature_shap_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                                 <span class="n">feature_shap_values</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">]],</span>
                                 <span class="n">class_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                                 <span class="n">train_data</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add information of feature shap values to the report.</span>

<span class="sd">        Args:</span>
<span class="sd">            notes(str): Explain the block</span>
<span class="sd">            mode (str): Model Model - classification/regression model</span>
<span class="sd">            feature_shap_values(:list of :tuple): a list of 2-item tuple,</span>
<span class="sd">                                        item[0]: feature name, item[1] shap values on each training samples</span>
<span class="sd">            class_id(int): the class id for visualization.</span>
<span class="sd">            train_data(numpy.dnarray): Optional, training data, row is for samples, column is for features.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">xai.graphs</span> <span class="kn">import</span> <span class="n">graph_generator</span>
        <span class="n">image_path</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/feature_shap_values_</span><span class="si">%s</span><span class="s1">.png&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure_path</span><span class="p">,</span> <span class="n">class_id</span><span class="p">)</span>
        <span class="n">image_path</span> <span class="o">=</span> <span class="n">graph_generator</span><span class="o">.</span><span class="n">FeatureShapValues</span><span class="p">(</span><span class="n">figure_path</span><span class="o">=</span><span class="n">image_path</span><span class="p">,</span>
                                                       <span class="n">shap_values</span><span class="o">=</span><span class="n">feature_shap_values</span><span class="p">,</span>
                                                       <span class="n">class_id</span><span class="o">=</span><span class="n">class_id</span><span class="p">,</span>
                                                       <span class="n">train_data</span><span class="o">=</span><span class="n">train_data</span><span class="p">,</span>
                                                       <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

        <span class="c1"># -- Draw Content --</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">notes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="n">MODE</span><span class="o">.</span><span class="n">CLASSIFICATION</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="s2">&quot;The figure below shows an overview of which features are most important class </span><span class="si">%s</span><span class="s2">,&quot;</span>
                                  <span class="s2">&quot; by plotting SHAP values of every feature for every sample.&quot;</span> <span class="o">%</span> <span class="n">class_id</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="s2">&quot;The figure below shows an overview of which features are most important in regression model,&quot;</span>
                                  <span class="s2">&quot; by plotting SHAP values of every feature for every sample.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_large_image</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">()</span></div>


    <span class="c1">################################################################################</span>
    <span class="c1">###  Training Section</span>
    <span class="c1">################################################################################</span>
<div class="viewcode-block" id="PdfWriter.draw_hyperparameter_tuning"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_hyperparameter_tuning">[docs]</a>    <span class="k">def</span> <span class="nf">draw_hyperparameter_tuning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                                   <span class="n">history</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">best_idx</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                                   <span class="n">search_space</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">benchmark_metric</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                   <span class="n">benchmark_threshold</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                   <span class="n">non_hyperopt_score</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add information of hyperparameter tuning to the report.</span>

<span class="sd">        Args:</span>
<span class="sd">            notes(str): Explain the block</span>
<span class="sd">            history(:dict of dict): a dict of training log dict.</span>
<span class="sd">                key: iteration index</span>
<span class="sd">                value: hyperparameter tuning information</span>
<span class="sd">                        Each dict has two keys:</span>
<span class="sd">                            - params: a dict of which key is the parameter name</span>
<span class="sd">                                        and value is parameter value</span>
<span class="sd">                            - val_scores: a dict of which key is the metric name</span>
<span class="sd">                                        and value is metric value</span>
<span class="sd">            best_idx(str):</span>
<span class="sd">                - the best idx based on benchmark metric, corresponding the `history` dict key</span>
<span class="sd">            search_space(:dict): parameter name and the search space for each parameter</span>
<span class="sd">            benchmark_metric(:str): the metric used for benchmarking during hyperparameter tuning</span>
<span class="sd">            benchmark_threshold(:float, Optional): the benchmarking threshold to accept the training</span>
<span class="sd">            non_hyperopt_score(:float, Optional): the training metric without hyperparameter tuning</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">xai.graphs</span> <span class="kn">import</span> <span class="n">graph_generator</span>
        <span class="c1"># -- Draw Content --</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">notes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
        <span class="c1"># tuning search space</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="s2">&quot;Hyperparameter Tuning Search Space&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;BI&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">start_itemize</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">params</span><span class="p">,</span> <span class="n">params_search_space</span> <span class="ow">in</span> <span class="n">search_space</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_key_value_pair</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">params_search_space</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">end_itemize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

        <span class="c1"># tuning history result</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="s2">&quot;Hyperparameter Tuning History Result&quot;</span><span class="p">,</span>
                              <span class="n">style</span><span class="o">=</span><span class="s1">&#39;BI&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span>
            <span class="s2">&quot;The metric results from hyperparameter tuning are shown in the figure.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">start_itemize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_key_value_pair</span><span class="p">(</span><span class="s2">&quot;Benchmark metric&quot;</span><span class="p">,</span> <span class="n">benchmark_metric</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_key_value_pair</span><span class="p">(</span><span class="s2">&quot;Benchmark value&quot;</span><span class="p">,</span> <span class="n">benchmark_threshold</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">end_itemize</span><span class="p">()</span>
        <span class="n">image_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/hyperopt_history.png&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure_path</span>
        <span class="n">image_path</span> <span class="o">=</span> <span class="n">graph_generator</span><span class="o">.</span><span class="n">EvaluationLinePlot</span><span class="p">(</span><span class="n">figure_path</span><span class="o">=</span><span class="n">image_path</span><span class="p">,</span>
                                                        <span class="n">data</span><span class="o">=</span><span class="n">history</span><span class="p">,</span>
                                                        <span class="n">title</span><span class="o">=</span><span class="s1">&#39;hyper_history&#39;</span><span class="p">,</span>
                                                        <span class="n">x_label</span><span class="o">=</span><span class="s1">&#39;Iterations&#39;</span><span class="p">,</span>
                                                        <span class="n">y_label</span><span class="o">=</span><span class="s1">&#39;Metrics Score&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span>
            <span class="n">benchmark_metric</span><span class="o">=</span><span class="n">benchmark_metric</span><span class="p">,</span>
            <span class="n">benchmark_value</span><span class="o">=</span><span class="n">benchmark_threshold</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_large_image</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">()</span>

        <span class="c1"># best result for hyperopt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="s2">&quot;Best Result from Hyperparameter Tuning&quot;</span><span class="p">,</span>
                              <span class="n">style</span><span class="o">=</span><span class="s2">&quot;BI&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_key_value_pair</span><span class="p">(</span><span class="s2">&quot;The best iteration is &quot;</span><span class="p">,</span> <span class="n">best_idx</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="s2">&quot;Parameters:&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">start_itemize</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">param_name</span><span class="p">,</span> <span class="n">param_value</span> <span class="ow">in</span> <span class="n">history</span><span class="p">[</span><span class="n">best_idx</span><span class="p">][</span><span class="s1">&#39;params&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_key_value_pair</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">param_name</span><span class="p">,</span> <span class="n">param_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">end_itemize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="s2">&quot;Validation Results:&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">start_itemize</span><span class="p">()</span>
        <span class="n">final_metric_value</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">param_name</span><span class="p">,</span> <span class="n">param_value</span> <span class="ow">in</span> <span class="n">history</span><span class="p">[</span><span class="n">best_idx</span><span class="p">][</span><span class="s1">&#39;val_scores&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">param_name</span> <span class="o">==</span> <span class="n">benchmark_metric</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_key_value_pair</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">param_name</span><span class="o">.</span><span class="n">capitalize</span><span class="p">(),</span>
                                            <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> (benchmarking metric)&quot;</span> <span class="o">%</span> <span class="n">param_value</span><span class="p">)</span>
                <span class="n">final_metric_value</span> <span class="o">=</span> <span class="n">param_value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_key_value_pair</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">param_name</span><span class="o">.</span><span class="n">capitalize</span><span class="p">(),</span>
                                            <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">param_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">end_itemize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

        <span class="c1"># Tuning final conclusion</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="s2">&quot;Hyperparameter Tuning Final Conclusion&quot;</span><span class="p">,</span>
                              <span class="n">style</span><span class="o">=</span><span class="s1">&#39;BI&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">non_hyperopt_score</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span>
                <span class="s2">&quot;There is no benchmarking conducted in this training. &quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span>
                <span class="s2">&quot;We will accept the best result from hyperparameter tuning as final parameter set.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">final_metric_value</span> <span class="o">&gt;</span> <span class="n">non_hyperopt_score</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_text</span><span class="p">(</span>
                    <span class="s2">&quot;Hyperparameter tuning best result (</span><span class="si">%.4f</span><span class="s2">) is better than benchmark score (</span><span class="si">%.4f</span><span class="s2">),&quot;</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="n">final_metric_value</span><span class="p">,</span> <span class="n">non_hyperopt_score</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">final_metric_value</span> <span class="o">&gt;</span> <span class="n">benchmark_threshold</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span>
                        <span class="s1">&#39; and it is better than acceptance benchmark scoring (</span><span class="si">%.4f</span><span class="s1">).&#39;</span> <span class="o">%</span> <span class="n">benchmark_threshold</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span>
                        <span class="s1">&#39;&lt;BR&gt;We accept it as the final parameter setting for the trained model.&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span>
                        <span class="s1">&#39; but it fails to meet the acceptance benchmark scoring (</span><span class="si">%.4f</span><span class="s1">).&#39;</span> <span class="o">%</span> <span class="n">benchmark_threshold</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span>
                        <span class="s1">&#39;We still accept it as the final parameter setting for the trained model, &#39;</span> \
                        <span class="s1">&#39;but will continue to improve it.&#39;</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_text</span><span class="p">(</span>
                    <span class="s2">&quot;Hyperparameter tuning best result (</span><span class="si">%.4f</span><span class="s2">) is worse than benchmark score (</span><span class="si">%.4f</span><span class="s2">), &quot;</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="n">final_metric_value</span><span class="p">,</span> <span class="n">non_hyperopt_score</span><span class="p">))</span>

                <span class="k">if</span> <span class="n">final_metric_value</span> <span class="o">&gt;</span> <span class="n">benchmark_threshold</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span>
                        <span class="s1">&#39;and benchmarking result is better than acceptance benchmark scoring (</span><span class="si">%.4f</span><span class="s1">).&#39;</span> <span class="o">%</span> <span class="n">benchmark_threshold</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span>
                        <span class="s1">&#39;We accept default parameters as the final solution for the trained model.&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span>
                        <span class="s1">&#39;but it fails to meet the acceptance benchmark scoring (</span><span class="si">%.4f</span><span class="s1">).&#39;</span> <span class="o">%</span> <span class="n">benchmark_threshold</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span>
                        <span class="s1">&#39;We still accept default parameters as the final solution for the trained model, &#39;</span> \
                        <span class="s1">&#39;but will continue to improve it.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span></div>

<div class="viewcode-block" id="PdfWriter.draw_learning_curve"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_learning_curve">[docs]</a>    <span class="k">def</span> <span class="nf">draw_learning_curve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                            <span class="n">history</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">best_idx</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                            <span class="n">benchmark_metric</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">benchmark_threshold</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">training_params</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add information of learning curve to report.</span>

<span class="sd">        Args:</span>
<span class="sd">            notes(str): Explain the block</span>
<span class="sd">            history(:dict of dict): a dict of training log dict.</span>
<span class="sd">                key: epoch index</span>
<span class="sd">                value: learning epoch information</span>
<span class="sd">                        Each dict has two keys:</span>
<span class="sd">                            - params: a dict of params on current epochs (Optional)</span>
<span class="sd">                            - val_scores: a dict of which key is the metric name</span>
<span class="sd">                                      and value is metric value</span>
<span class="sd">            best_idx(str):</span>
<span class="sd">                - the best epoch based on benchmark metric, corresponding the `history` dict key</span>
<span class="sd">            benchmark_metric(:str): the metric used for benchmarking during learning</span>
<span class="sd">            benchmark_threshold(:float, Optional): the benchmarking threshold to accept the training</span>
<span class="sd">            training_params(:dict): a dict of which key is training parameter name and</span>
<span class="sd">                                    value is training parameter value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">xai.graphs</span> <span class="kn">import</span> <span class="n">graph_generator</span>
        <span class="c1"># -- Draw Content --</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">notes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>

        <span class="n">image_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/deep_learning_curve.png&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure_path</span>
        <span class="n">image_path</span> <span class="o">=</span> <span class="n">graph_generator</span><span class="o">.</span><span class="n">EvaluationLinePlot</span><span class="p">(</span><span class="n">figure_path</span><span class="o">=</span><span class="n">image_path</span><span class="p">,</span>
                                                        <span class="n">data</span><span class="o">=</span><span class="n">history</span><span class="p">,</span>
                                                        <span class="n">title</span><span class="o">=</span><span class="s1">&#39;training_history&#39;</span><span class="p">,</span>
                                                        <span class="n">x_label</span><span class="o">=</span><span class="s1">&#39;Steps&#39;</span><span class="p">,</span>
                                                        <span class="n">y_label</span><span class="o">=</span><span class="s1">&#39;Metrics Score&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span>
            <span class="n">benchmark_metric</span><span class="o">=</span><span class="n">benchmark_metric</span><span class="p">,</span>
            <span class="n">benchmark_value</span><span class="o">=</span><span class="n">benchmark_threshold</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">training_params</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="s2">&quot;Training Parameters&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;BI&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">start_itemize</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">param_name</span><span class="p">,</span> <span class="n">param_value</span> <span class="ow">in</span> <span class="n">training_params</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_key_value_pair</span><span class="p">(</span><span class="n">param_name</span><span class="p">,</span> <span class="n">param_value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">end_itemize</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="s2">&quot;Learning Curve&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;BI&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span>
            <span class="s2">&quot;The metric results from several training epochs are shown in the figure.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">start_itemize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_key_value_pair</span><span class="p">(</span><span class="s2">&quot;Benchmark metric&quot;</span><span class="p">,</span> <span class="n">benchmark_metric</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_key_value_pair</span><span class="p">(</span><span class="s2">&quot;Benchmark value&quot;</span><span class="p">,</span> <span class="n">benchmark_threshold</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">end_itemize</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_large_image</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="s2">&quot;Best Epoch from Training&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;BI&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_key_value_pair</span><span class="p">(</span><span class="s2">&quot;The best iteration is &quot;</span><span class="p">,</span> <span class="n">best_idx</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="s2">&quot;Validation Results:&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;BI&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">start_itemize</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">best_idx</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">history</span><span class="p">:</span>
            <span class="n">best_idx</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">best_idx</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">param_name</span><span class="p">,</span> <span class="n">param_value</span> <span class="ow">in</span> <span class="n">history</span><span class="p">[</span><span class="n">best_idx</span><span class="p">][</span><span class="s1">&#39;val_scores&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">param_name</span> <span class="o">==</span> <span class="n">benchmark_metric</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_key_value_pair</span><span class="p">(</span><span class="n">param_name</span><span class="o">.</span><span class="n">capitalize</span><span class="p">(),</span>
                                            <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> (benchmarking metric)&quot;</span> <span class="o">%</span> <span class="n">param_value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_key_value_pair</span><span class="p">(</span><span class="n">param_name</span><span class="o">.</span><span class="n">capitalize</span><span class="p">(),</span>
                                            <span class="n">param_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">end_itemize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span></div>

    <span class="c1">################################################################################</span>
    <span class="c1">###  Interpreter Section</span>
    <span class="c1">################################################################################</span>
<div class="viewcode-block" id="PdfWriter.draw_model_interpreter"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_model_interpreter">[docs]</a>    <span class="k">def</span> <span class="nf">draw_model_interpreter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                               <span class="n">mode</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">class_stats</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
                               <span class="n">total_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">stats_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                               <span class="n">k</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">top</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">15</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add model interpreter for classification</span>

<span class="sd">        Args:</span>
<span class="sd">            mode (str): Model Model - classification/regression model</span>
<span class="sd">            class_stats (dict): A dictionary maps the label to its aggregated statistics</span>
<span class="sd">            total_count (int): The total number of explanations to generate the statistics</span>
<span class="sd">            stats_type (str): The defined stats_type for statistical analysis</span>
<span class="sd">            k (int): The k value of the defined stats_type</span>
<span class="sd">            top (int): the number of top explanation to display</span>
<span class="sd">            notes(str): text to explain the block</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">xai.graphs</span> <span class="kn">import</span> <span class="n">graph_generator</span>

        <span class="c1"># -- Draw Content --</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="s2">&quot;Statistical type: </span><span class="si">%s</span><span class="s2"> with K value: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">stats_type</span><span class="p">,</span> <span class="n">k</span><span class="p">),</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;I&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">_class</span><span class="p">,</span> <span class="n">_explanation_ranking</span> <span class="ow">in</span> <span class="n">class_stats</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="n">MODE</span><span class="o">.</span><span class="n">CLASSIFICATION</span><span class="p">:</span>
                <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Interpretation for Class </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">_class</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Interpretation for Regression&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
            <span class="n">image_path</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/model_interpreter_</span><span class="si">%s</span><span class="s1">.png&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure_path</span><span class="p">,</span> <span class="n">_class</span><span class="p">)</span>
            <span class="n">importance_ranking</span> <span class="o">=</span> <span class="p">[(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">_explanation_ranking</span><span class="o">.</span><span class="n">items</span><span class="p">()][:</span> <span class="n">top</span><span class="p">]</span>
            <span class="n">image_path</span> <span class="o">=</span> <span class="n">graph_generator</span><span class="o">.</span><span class="n">FeatureImportance</span><span class="p">(</span>
                <span class="n">figure_path</span><span class="o">=</span><span class="n">image_path</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">importance_ranking</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_large_image</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">()</span></div>

<div class="viewcode-block" id="PdfWriter.draw_error_analysis"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_error_analysis">[docs]</a>    <span class="k">def</span> <span class="nf">draw_error_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">error_stats</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
                            <span class="n">stats_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">k</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">top</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">15</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add error analysis for classification</span>

<span class="sd">        Args:</span>
<span class="sd">            mode (str): Model Model - classification/regression model</span>
<span class="sd">            error_stats (dict): A dictionary maps the label to its aggregated statistics</span>
<span class="sd">            stats_type (str): The defined stats_type for statistical analysis</span>
<span class="sd">            k (int): The k value of the defined stats_type</span>
<span class="sd">            top (int): the number of top explanation to display</span>
<span class="sd">            notes(str): text to explain the block</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">xai.graphs</span> <span class="kn">import</span> <span class="n">graph_generator</span>

        <span class="c1"># -- Draw Content --</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="s2">&quot;Statistical type: </span><span class="si">%s</span><span class="s2"> with K value: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">stats_type</span><span class="p">,</span> <span class="n">k</span><span class="p">),</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;I&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">gt_class</span><span class="p">,</span> <span class="n">predict_class</span><span class="p">),(</span><span class="n">_explanation_dict</span><span class="p">,</span> <span class="n">num_sample</span><span class="p">)</span> <span class="ow">in</span> <span class="n">error_stats</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="n">MODE</span><span class="o">.</span><span class="n">CLASSIFICATION</span><span class="p">:</span>
                <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> sample from class [</span><span class="si">%s</span><span class="s1">] is wrongly classified as class[</span><span class="si">%s</span><span class="s1">]&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">num_sample</span><span class="p">,</span> <span class="n">gt_class</span><span class="p">,</span> <span class="n">predict_class</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="s1">&#39; - Top reasons that they are predicted as class[</span><span class="si">%s</span><span class="s1">]&#39;</span> <span class="o">%</span> <span class="n">predict_class</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;sample for regression model&#39;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="s1">&#39; - Top reasons in regression prediction&#39;</span><span class="p">)</span>
            <span class="n">image_path</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/feature_importance_</span><span class="si">%s</span><span class="s1">.png&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure_path</span><span class="p">,</span> <span class="n">predict_class</span><span class="p">)</span>
            <span class="n">importance_ranking</span> <span class="o">=</span> <span class="p">[(</span><span class="n">key</span><span class="p">,</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="n">_explanation_dict</span><span class="p">[</span><span class="n">predict_class</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()][:</span><span class="n">top</span><span class="p">]</span>
            <span class="n">image_path</span> <span class="o">=</span> <span class="n">graph_generator</span><span class="o">.</span><span class="n">FeatureImportance</span><span class="p">(</span>
                <span class="n">figure_path</span><span class="o">=</span><span class="n">image_path</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">importance_ranking</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_large_image</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">()</span></div>

    <span class="c1">################################################################################</span>
    <span class="c1">###  Evaluation Section</span>
    <span class="c1">################################################################################</span>
<div class="viewcode-block" id="PdfWriter.draw_multi_class_evaluation_metric_results"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_multi_class_evaluation_metric_results">[docs]</a>    <span class="k">def</span> <span class="nf">draw_multi_class_evaluation_metric_results</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                                                   <span class="n">metric_tuple</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add information about metric results for multi-class evaluation</span>

<span class="sd">        Args:</span>
<span class="sd">            notes(str): Explain the block</span>
<span class="sd">            *metric_tuple(tuple): (evaluation_header, evaluation_metric_dict)</span>
<span class="sd">                - evaluation_header(str): a header for current evaluation,</span>
<span class="sd">                                            can be split or round number.</span>
<span class="sd">                - evaluation_metric_dict(dict): key-value pair for metric</span>
<span class="sd">                    - key: metric name</span>
<span class="sd">                    - value: metric dict. The dict should either</span>
<span class="sd">                     (1) have a `class` keyword, with key-value pair of class name</span>
<span class="sd">                                            and corresponding values, or</span>
<span class="sd">                     (2) have a `average` keyword to show a macro-average metric.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">xai.model.evaluation.multi_classification_result</span> <span class="kn">import</span> \
            <span class="n">MultiClassificationResult</span>
        <span class="c1"># -- Draw Content --</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">eval_name</span><span class="p">,</span> <span class="n">eval_metric_dict</span> <span class="ow">in</span> <span class="n">metric_tuple</span><span class="p">:</span>
            <span class="n">cr</span> <span class="o">=</span> <span class="n">MultiClassificationResult</span><span class="p">()</span>
            <span class="n">cr</span><span class="o">.</span><span class="n">load_results_from_meta</span><span class="p">(</span><span class="n">eval_metric_dict</span><span class="p">)</span>
            <span class="n">table_name</span><span class="p">,</span> <span class="n">table_header</span><span class="p">,</span> <span class="n">table_data</span><span class="p">,</span> <span class="n">table_layout</span> <span class="o">=</span> <span class="n">cr</span><span class="o">.</span><span class="n">convert_metrics_to_table</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;BI&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span><span class="n">table_header</span><span class="p">,</span> <span class="n">table_data</span><span class="p">,</span> <span class="n">table_layout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span></div>

<div class="viewcode-block" id="PdfWriter.draw_binary_class_evaluation_metric_results"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_binary_class_evaluation_metric_results">[docs]</a>    <span class="k">def</span> <span class="nf">draw_binary_class_evaluation_metric_results</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                                                    <span class="n">metric_tuple</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">,</span>
                                                    <span class="n">aggregated</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add information about metric results for binary-class evaluation</span>

<span class="sd">        Args:</span>
<span class="sd">            notes(str): Explain the block</span>
<span class="sd">            metric_tuple(tuple): (evaluation_header, evaluation_metric_dict)</span>
<span class="sd">                - evaluation_header(str): a header for current evaluation,</span>
<span class="sd">                                        can be split or round number.</span>
<span class="sd">                - evaluation_metric_dict(dict): key-value pair for metric</span>
<span class="sd">                    - key: metric name</span>
<span class="sd">                    - value: metric value</span>
<span class="sd">            aggregated(bool): whether to aggregate multiple result tables into one</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
        <span class="kn">from</span> <span class="nn">xai.model.evaluation.binary_classification_result</span> <span class="kn">import</span> \
            <span class="n">BinaryClassificationResult</span>
        <span class="c1"># -- Draw Content --</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>

        <span class="n">combined_table_dict</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
        <span class="n">combined_table_header</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Split/Round&quot;</span><span class="p">]</span>
        <span class="n">table_name</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">eval_name</span><span class="p">,</span> <span class="n">eval_metric_dict</span> <span class="ow">in</span> <span class="n">metric_tuple</span><span class="p">:</span>
            <span class="n">combined_table_header</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">eval_name</span><span class="p">)</span>
            <span class="n">cr</span> <span class="o">=</span> <span class="n">BinaryClassificationResult</span><span class="p">()</span>
            <span class="n">cr</span><span class="o">.</span><span class="n">load_results_from_meta</span><span class="p">(</span><span class="n">eval_metric_dict</span><span class="p">)</span>
            <span class="n">table_name</span><span class="p">,</span> <span class="n">table_header</span><span class="p">,</span> <span class="n">table_data</span><span class="p">,</span> <span class="n">table_layout</span> <span class="o">=</span> <span class="n">cr</span><span class="o">.</span><span class="n">convert_metrics_to_table</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">aggregated</span><span class="p">:</span>
                <span class="n">table_data_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">table_data</span><span class="p">}</span>
                <span class="k">for</span> <span class="n">metric_name</span><span class="p">,</span> <span class="n">metric_value</span> <span class="ow">in</span> <span class="n">table_data_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">combined_table_dict</span><span class="p">[</span><span class="n">metric_name</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">metric_value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="s1">&#39;For split/round &lt;B&gt;</span><span class="si">%s</span><span class="s1">&lt;/B&gt;&#39;</span> <span class="o">%</span> <span class="n">eval_name</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span><span class="n">table_header</span><span class="p">,</span> <span class="n">table_data</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">aggregated</span><span class="p">:</span>
            <span class="n">combined_table_values</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">metric_name</span><span class="p">,</span> <span class="n">metric_value_list</span> <span class="ow">in</span> <span class="n">combined_table_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">combined_table_values</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">metric_name</span><span class="p">]</span> <span class="o">+</span> <span class="n">metric_value_list</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;BI&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span><span class="n">combined_table_header</span><span class="p">,</span> <span class="n">combined_table_values</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span></div>

<div class="viewcode-block" id="PdfWriter.draw_confusion_matrix_results"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_confusion_matrix_results">[docs]</a>    <span class="k">def</span> <span class="nf">draw_confusion_matrix_results</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                                      <span class="n">confusion_matrix_tuple</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        add information about confusion matrix to report</span>

<span class="sd">        Args:</span>
<span class="sd">            notes(str): Explain the block</span>
<span class="sd">            *confusion_matrix_tuple(tuple): (confusion_matrix_header, confusion_matrix_dict)</span>
<span class="sd">                - confusion_matrix_header(str): a header for confusion_matrix,</span>
<span class="sd">                                                can be split or round number.</span>
<span class="sd">                - confusion_matrix_dict(dict):</span>
<span class="sd">                    - `labels`(:list of :str): label of classes</span>
<span class="sd">                    - `values`(:list of :list): 2D list for confusion matrix value,</span>
<span class="sd">                                            row for predicted, column for true.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">xai.graphs</span> <span class="kn">import</span> <span class="n">graph_generator</span>
        <span class="c1"># -- Draw Content --</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>

        <span class="n">image_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="p">(</span><span class="n">eval_name</span><span class="p">,</span> <span class="n">confusion_matrix_mat</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
                <span class="n">confusion_matrix_tuple</span><span class="p">):</span>
            <span class="n">figure_path</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">_</span><span class="si">%s</span><span class="s1">_cm.png&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">figure_path</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">eval_name</span><span class="p">)</span>
            <span class="n">image_path</span> <span class="o">=</span> <span class="n">graph_generator</span><span class="o">.</span><span class="n">HeatMap</span><span class="p">(</span><span class="n">figure_path</span><span class="o">=</span><span class="n">figure_path</span><span class="p">,</span>
                                                 <span class="n">data</span><span class="o">=</span><span class="n">confusion_matrix_mat</span><span class="p">[</span>
                                                     <span class="s1">&#39;values&#39;</span><span class="p">],</span>
                                                 <span class="n">title</span><span class="o">=</span><span class="n">eval_name</span><span class="p">,</span>
                                                 <span class="n">x_label</span><span class="o">=</span><span class="s1">&#39;Predict&#39;</span><span class="p">,</span>
                                                 <span class="n">y_label</span><span class="o">=</span><span class="s1">&#39;True&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span>
                <span class="n">x_tick</span><span class="o">=</span><span class="n">confusion_matrix_mat</span><span class="p">[</span><span class="s1">&#39;labels&#39;</span><span class="p">],</span>
                <span class="n">y_tick</span><span class="o">=</span><span class="n">confusion_matrix_mat</span><span class="p">[</span><span class="s1">&#39;labels&#39;</span><span class="p">],</span>
                <span class="n">color_bar</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">image_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">image_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_grid_images</span><span class="p">(</span><span class="n">image_set</span><span class="o">=</span><span class="n">image_list</span><span class="p">,</span>
                                     <span class="n">grid_spec</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">80</span><span class="p">)})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">column_width</span> <span class="o">=</span> <span class="mi">180</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">image_list</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">cur_w</span> <span class="o">=</span> <span class="n">column_width</span>
            <span class="n">spec_list</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">image_list</span><span class="p">)):</span>
                <span class="n">spec_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">cur_w</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">column_width</span><span class="p">,</span> <span class="n">column_width</span><span class="p">)</span>
                <span class="n">cur_w</span> <span class="o">+=</span> <span class="n">column_width</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_list_of_grid_images</span><span class="p">(</span><span class="n">image_list</span><span class="p">,</span> <span class="n">spec_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span></div>

<div class="viewcode-block" id="PdfWriter.draw_multi_class_confidence_distribution"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_multi_class_confidence_distribution">[docs]</a>    <span class="k">def</span> <span class="nf">draw_multi_class_confidence_distribution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                                                 <span class="n">visual_result_tuple</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">,</span>
                                                 <span class="n">max_num_classes</span><span class="o">=</span><span class="mi">9</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add information about multi class confidence distribution to report</span>

<span class="sd">        Args:</span>
<span class="sd">            notes(str): Explain the block</span>
<span class="sd">            visual_result_tuple(tuple): (visual_result_header, visual_result_dict)</span>
<span class="sd">               - visual_result_header(str): a header for confusion_matrix,</span>
<span class="sd">                                            can be split or round number.</span>
<span class="sd">               - visual_result_dict(dict): key-value</span>
<span class="sd">                   - key(str): the predicted class</span>
<span class="sd">                   - value(dit): result dict</span>
<span class="sd">                        - `gt` (:list of :str): ground truth class label for all samples</span>
<span class="sd">                        - `values` (:list of :float): probability for all samples</span>
<span class="sd">            max_num_classes(int, Optional): maximum number of classes</span>
<span class="sd">                                    displayed for each graph, default 9</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">operator</span>
        <span class="kn">from</span> <span class="nn">xai.graphs</span> <span class="kn">import</span> <span class="n">graph_generator</span>
        <span class="kn">from</span> <span class="nn">xai.graphs.format_contants</span> <span class="kn">import</span> <span class="n">ABSOLUTE_2_EQUAL_GRID_SPEC</span>
        <span class="c1"># -- Draw Content --</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>

        <span class="n">top_classes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">eval_name</span><span class="p">,</span> <span class="n">eval_vis_result</span> <span class="ow">in</span> <span class="n">visual_result_tuple</span><span class="p">:</span>
            <span class="n">predicted_class_count</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
            <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">eval_vis_result</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">eval_vis_result</span><span class="p">[</span><span class="n">label</span><span class="p">]</span>
                <span class="n">num_sample</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;gt&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">predicted_class_count</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_sample</span>

                <span class="n">sorted_class_size</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">predicted_class_count</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span>
                                           <span class="n">key</span><span class="o">=</span><span class="n">operator</span><span class="o">.</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">))[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">top_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="ow">in</span> <span class="n">sorted_class_size</span><span class="p">]</span>

            <span class="n">image_path_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">class_label</span> <span class="ow">in</span> <span class="n">top_classes</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">eval_vis_result</span><span class="p">[</span><span class="n">class_label</span><span class="p">]</span>
                <span class="n">num_sample</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;gt&#39;</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">num_sample</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">image_path</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">_</span><span class="si">%s</span><span class="s1">_conf_dist.png&#39;</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">figure_path</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">class_label</span><span class="p">)</span>
                    <span class="n">sw_image_path</span> <span class="o">=</span> <span class="n">graph_generator</span><span class="o">.</span><span class="n">ResultProbabilityForMultiClass</span><span class="p">(</span>
                        <span class="n">image_path</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span>
                        <span class="s1">&#39;Predicted as </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">class_label</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
                    <span class="n">image_path_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sw_image_path</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">image_path_list</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">max_num_classes</span><span class="p">:</span>
                    <span class="k">break</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_list_of_grid_images</span><span class="p">(</span><span class="n">image_set</span><span class="o">=</span><span class="n">image_path_list</span><span class="p">,</span>
                                             <span class="n">grid_spec</span><span class="o">=</span><span class="n">ABSOLUTE_2_EQUAL_GRID_SPEC</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span></div>

<div class="viewcode-block" id="PdfWriter.draw_binary_class_confidence_distribution"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_binary_class_confidence_distribution">[docs]</a>    <span class="k">def</span> <span class="nf">draw_binary_class_confidence_distribution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                                                  <span class="n">visual_result_tuple</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add information about binary class confidence distribution to report</span>

<span class="sd">        Args:</span>
<span class="sd">            notes(str): Explain the block</span>
<span class="sd">            visual_result_tuple(tuple): (visual_result_header, visual_result_dict)</span>
<span class="sd">               - visual_result_header(str): a header for confusion_matrix,</span>
<span class="sd">                                                can be split or round number.</span>
<span class="sd">               - visual_result_dict(dict): key-value</span>
<span class="sd">                    - `gt` (:list of :str): ground truth class label for all samples</span>
<span class="sd">                    - `probability` (:list of :list): 2D list (N sample * 2) to</span>
<span class="sd">                                    present probability distribution of each sample</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">xai.graphs</span> <span class="kn">import</span> <span class="n">graph_generator</span>
        <span class="c1"># -- Draw Content --</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>

        <span class="n">image_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">eval_name</span><span class="p">,</span> <span class="n">eval_vis_result</span> <span class="ow">in</span> <span class="n">visual_result_tuple</span><span class="p">:</span>
            <span class="n">image_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/</span><span class="si">%s</span><span class="s2">_prob_dist.png&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure_path</span><span class="p">,</span> <span class="n">eval_name</span><span class="p">)</span>
            <span class="n">image_path</span> <span class="o">=</span> <span class="n">graph_generator</span><span class="o">.</span><span class="n">ResultProbability</span><span class="p">(</span>
                <span class="n">figure_path</span><span class="o">=</span><span class="n">image_path</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">eval_vis_result</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Probability Distribution&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
            <span class="n">image_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">image_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_grid_images</span><span class="p">(</span><span class="n">image_set</span><span class="o">=</span><span class="n">image_list</span><span class="p">,</span>
                                     <span class="n">grid_spec</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">80</span><span class="p">)})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">column_width</span> <span class="o">=</span> <span class="mi">180</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">image_list</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">cur_w</span> <span class="o">=</span> <span class="n">column_width</span>
            <span class="n">spec_list</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">image_list</span><span class="p">):</span>
                <span class="n">spec_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">cur_w</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">column_width</span><span class="p">,</span> <span class="n">column_width</span><span class="p">)</span>
                <span class="n">cur_w</span> <span class="o">+=</span> <span class="n">column_width</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_list_of_grid_images</span><span class="p">(</span><span class="n">image_list</span><span class="p">,</span> <span class="n">spec_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span></div>

<div class="viewcode-block" id="PdfWriter.draw_binary_class_reliability_diagram"><a class="viewcode-back" href="../../../formatter/formatter.portable_document.writer.html#formatter.portable_document.writer.PdfWriter.draw_binary_class_reliability_diagram">[docs]</a>    <span class="k">def</span> <span class="nf">draw_binary_class_reliability_diagram</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                                              <span class="n">visual_result_tuple</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add information about reliability to report</span>

<span class="sd">        Args:</span>
<span class="sd">            notes(str): Explain the block</span>
<span class="sd">            visual_result_tuple(tuple): (visual_result_header, visual_result_dict)</span>
<span class="sd">               - visual_result_header(str): a header for confusion_matrix,</span>
<span class="sd">                                        can be split or round number.</span>
<span class="sd">               - visual_result_dict(dict): key-value</span>
<span class="sd">                    - `gt` (:list of :str): ground truth class label for all samples</span>
<span class="sd">                    - `probability` (:list of :list): 2D list (N sample * 2) to</span>
<span class="sd">                            present probability distribution of each sample</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">xai.graphs</span> <span class="kn">import</span> <span class="n">graph_generator</span>
        <span class="c1"># -- Draw Content --</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_new_line</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>

        <span class="n">image_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">eval_name</span><span class="p">,</span> <span class="n">eval_vis_result</span> <span class="ow">in</span> <span class="n">visual_result_tuple</span><span class="p">:</span>
            <span class="n">image_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/</span><span class="si">%s</span><span class="s2">_reliability_diagram.png&quot;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">figure_path</span><span class="p">,</span> <span class="n">eval_name</span><span class="p">)</span>
            <span class="n">image_path</span> <span class="o">=</span> <span class="n">graph_generator</span><span class="o">.</span><span class="n">ReliabilityDiagram</span><span class="p">(</span>
                <span class="n">figure_path</span><span class="o">=</span><span class="n">image_path</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">eval_vis_result</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Reliability Diagram&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
            <span class="n">image_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">image_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_grid_images</span><span class="p">(</span><span class="n">image_set</span><span class="o">=</span><span class="n">image_list</span><span class="p">,</span>
                                     <span class="n">grid_spec</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">80</span><span class="p">)})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">column_width</span> <span class="o">=</span> <span class="mi">180</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">image_list</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">cur_w</span> <span class="o">=</span> <span class="n">column_width</span>
            <span class="n">spec_list</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">image_list</span><span class="p">):</span>
                <span class="n">spec_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">cur_w</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">column_width</span><span class="p">,</span> <span class="n">column_width</span><span class="p">)</span>
                <span class="n">cur_w</span> <span class="o">+=</span> <span class="n">column_width</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">add_list_of_grid_images</span><span class="p">(</span><span class="n">image_list</span><span class="p">,</span> <span class="n">spec_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span></div></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Wang Jin, Sean Saito, Chai Wei Tah, Ni Peng, Shu Zhen, Karthik Muthuswamy, Amrit Raj

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>