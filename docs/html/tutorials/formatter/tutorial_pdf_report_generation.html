

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>PDF Report Generation &mdash; XAI  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="HTML Report Generation" href="tutorial_html_report_generation.html" />
    <link rel="prev" title="Contextual AI formatter tutorials" href="../../formatter_module_tutorial.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> XAI
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">XAI Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../data_module.html">Data Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training_module.html">Model Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../inference_module.html">Explainer Module</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../formatter_module.html">Formatter Module</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../formatter_module_tutorial.html">Tutorial</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../../formatter_module_tutorial.html#pdf-report">PDF Report</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../../formatter_module_tutorial.html#tutorial">Tutorial</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../formatter/formatter.html">API Documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../compiler_module.html">Compiler Module</a></li>
</ul>
<p class="caption"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guide.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../autodoc.html">Contextual AI Auto-doc</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">XAI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../formatter_module.html">Formatter Module</a> &raquo;</li>
        
          <li><a href="../../formatter_module_tutorial.html">Contextual AI formatter tutorials</a> &raquo;</li>
        
      <li>PDF Report Generation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/tutorials/formatter/tutorial_pdf_report_generation.nblink.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 5ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="PDF-Report-Generation">
<h1>PDF Report Generation<a class="headerlink" href="#PDF-Report-Generation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="(*)-Prerequisite">
<h2>(*) Prerequisite<a class="headerlink" href="#(*)-Prerequisite" title="Permalink to this headline">¶</a></h2>
<div class="section" id="Install-required-packages">
<h3>Install required packages<a class="headerlink" href="#Install-required-packages" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>Go to the root directory and install the required packages:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>set your jupyter notebook kernel correctly to the environment with all required packages.</p></li>
</ol>
</div>
<div class="section" id="Set-up-environment">
<h3>Set up environment<a class="headerlink" href="#Set-up-environment" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;../../../&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="(A)-Generate-PDF-Report">
<h2>(A) Generate PDF Report<a class="headerlink" href="#(A)-Generate-PDF-Report" title="Permalink to this headline">¶</a></h2>
<p>This demo is to use Contextual AI report formatter (a.k.a <code class="docutils literal notranslate"><span class="pre">xai.formatter.report</span></code>) to generate report content. ### Step 1: Create Report object Create a report object</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">xai.formatter</span> <span class="kn">import</span> <span class="n">Report</span>
<span class="n">report</span> <span class="o">=</span> <span class="n">Report</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;First Sample Report&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>When generated, the report name is use as page header:</p>
<p><img alt="Report Header" src="tutorials/formatter/formatter_pdf_images/sample-report-header-2.png" /></p>
<div class="section" id="Step-2:-Create-section-and-add-detail-to-report">
<h3>Step 2: Create section and add detail to report<a class="headerlink" href="#Step-2:-Create-section-and-add-detail-to-report" title="Permalink to this headline">¶</a></h3>
<p>Content refer a detail block inside report. Contextual AI library group certain popular detail into business group, some examples includes but not limited to: - Dataset distribution - Feature value distribution (based on feature type: categorical, numeric, text, etc.) - Evaluation result summary - Feature importance - Learning curve history - …</p>
<p>There is pre-defined order of the report structure, it’s like a <code class="docutils literal notranslate"><span class="pre">section</span></code> of the report: The pre-defined order is in following order: 1. Cover Contents 2. Content Table 3. Detail Contents</p>
<p>Each content can be added to <code class="docutils literal notranslate"><span class="pre">overview</span></code> (overview section) and <code class="docutils literal notranslate"><span class="pre">detail</span></code> (details section) using: - Add content to overview section with - <code class="docutils literal notranslate"><span class="pre">report.overview.add_xx</span></code> - Add content to details section with - <code class="docutils literal notranslate"><span class="pre">report.detail.add_xx</span></code> If there is no content added, the respecitve section will not be create.</p>
<p>The content table section is optional but <code class="docutils literal notranslate"><span class="pre">enabled</span></code> by default, call <code class="docutils literal notranslate"><span class="pre">has_content_table</span></code> and set indicator as <code class="docutils literal notranslate"><span class="pre">False</span></code> to disable. There is no pre-defined item in content table, it is depends on the implementation of inherited <code class="docutils literal notranslate"><span class="pre">writer</span></code>.</p>
<div class="section" id="2.1:-Content-table-design-for-PdfWriter">
<h4>2.1: Content table design for PdfWriter<a class="headerlink" href="#2.1:-Content-table-design-for-PdfWriter" title="Permalink to this headline">¶</a></h4>
<p>For instance, in <em>PdfWriter</em> implementation ONLY content like <code class="docutils literal notranslate"><span class="pre">SectionTitle</span></code> and <code class="docutils literal notranslate"><span class="pre">Header</span></code> is added to content table. - <code class="docutils literal notranslate"><span class="pre">add_section_title</span></code>: add section title with ribbon - <code class="docutils literal notranslate"><span class="pre">add_header_level_1</span></code>: add top level 1 header (e.g. 1, 2, 3, ..) - <code class="docutils literal notranslate"><span class="pre">add_header_level_2</span></code>: add level 2 header (e.g. 1.1, 1.2, 1.3, 2.1, ..) - <code class="docutils literal notranslate"><span class="pre">add_header_level_3</span></code>: add level 3 header (e.g. 1.1.1, 1.1.2, 2.1.1, 2.1.2, ..)</p>
<p>Upon generate, the content table will be in the follow format:</p>
<p><img alt="Content Table" src="tutorials/formatter/formatter_pdf_images/first-sample-report_content-table.png" /></p>
</div>
<div class="section" id="2.2:-Create-Cover-Section">
<h4>2.2: Create Cover Section<a class="headerlink" href="#2.2:-Create-Cover-Section" title="Permalink to this headline">¶</a></h4>
<p>Add content to overview section with - report.overview.add_xx - <code class="docutils literal notranslate"><span class="pre">add_section_title</span></code>: add section title with ribbon - <code class="docutils literal notranslate"><span class="pre">add_paragraph</span></code>: add section paragraph</p>
<p>Below is a sample to create section with title <code class="docutils literal notranslate"><span class="pre">Summary</span></code> and add paragraph to it.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Create Cover Section</span>
<span class="n">report</span><span class="o">.</span><span class="n">overview</span><span class="o">.</span><span class="n">add_section_title</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Summary&quot;</span><span class="p">)</span>
<span class="n">report</span><span class="o">.</span><span class="n">overview</span><span class="o">.</span><span class="n">add_paragraph</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;This is summary Info&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>When generated, the overview section will be in the follow format:</p>
<p><img alt="Cover Contents" src="tutorials/formatter/formatter_pdf_images/first-sample-report-overview-content.png" /></p>
</div>
</div>
<div class="section" id="2.3:-Create-Content-Section-1">
<h3>2.3: Create Content Section 1<a class="headerlink" href="#2.3:-Create-Content-Section-1" title="Permalink to this headline">¶</a></h3>
<p>Add content to detail section with - report.detail.add_xx - <code class="docutils literal notranslate"><span class="pre">add_header_1</span></code>: add section hearder 1 - <code class="docutils literal notranslate"><span class="pre">add_header_2</span></code>: add section hearder 2 - <code class="docutils literal notranslate"><span class="pre">add_header_3</span></code>: add section hearder 3</p>
<p>Below is a sample to create header <code class="docutils literal notranslate"><span class="pre">Section</span> <span class="pre">1</span></code> and add paragraph to it.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Create Contents Section - Header</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_section_title</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Example of Section Title 1&quot;</span><span class="p">)</span>
<span class="c1">#### Header Level 1 and it paragraph</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_1</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Section 1 Header 1&#39;</span><span class="p">)</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_paragraph</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;This is content Info of header 1&quot;</span><span class="p">)</span>
<span class="c1">#### Header Level 2 and it paragraph</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_2</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Section 1 Header 2&#39;</span><span class="p">)</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_paragraph</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;This is content Info of header 2&quot;</span><span class="p">)</span>
<span class="c1">#### Header Level 3 and it paragraph</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_3</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Section 1 Header 3&#39;</span><span class="p">)</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_paragraph</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;This is content Info of header 3&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>When generated, the detail section 1 will be in the follow format:</p>
<p><img alt="Content Section Header 1" src="tutorials/formatter/formatter_pdf_images/first-sample-report-content-section-header-1.png" /></p>
</div>
<div class="section" id="2.4:-Create-Content-Section-2">
<h3>2.4: Create Content Section 2<a class="headerlink" href="#2.4:-Create-Content-Section-2" title="Permalink to this headline">¶</a></h3>
<p>Add content to detail section with - report.detail.add_xx - <code class="docutils literal notranslate"><span class="pre">add_new_page</span></code>: add new page in PDF - <code class="docutils literal notranslate"><span class="pre">add_paragraph_title</span></code>: add paragraph hearder</p>
<p>Below is a sample to create header <code class="docutils literal notranslate"><span class="pre">Section</span> <span class="pre">2</span></code> and add paragraph to it.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Create Contents Section - more</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_new_page</span><span class="p">()</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_section_title</span><span class="p">(</span><span class="s2">&quot;Example for Section Title 2&quot;</span><span class="p">)</span>
<span class="c1">#### Header Level 1</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_1</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Section 2 Header 1&#39;</span><span class="p">)</span>
<span class="c1">### Add Level 2 and it paragraph</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_2</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Section 2 Header 2&#39;</span><span class="p">)</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_paragraph</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Some desc on header 2 in section 2 ...&quot;</span><span class="p">)</span>
<span class="c1">### Add another paragraph title</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_paragraph_title</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Paragraph Title inside section 2 header 2&#39;</span><span class="p">)</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_paragraph</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Another disc under paragraph title ...&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>When generated, the detail section 2 will be in the follow format:</p>
<p><img alt="Content Section Header 2" src="tutorials/formatter/formatter_pdf_images/first-sample-report-content-section-header-2.png" /></p>
</div>
<div class="section" id="Step-3:-Generate-the-report">
<h3>Step 3: Generate the report<a class="headerlink" href="#Step-3:-Generate-the-report" title="Permalink to this headline">¶</a></h3>
<p>Finally, call <code class="docutils literal notranslate"><span class="pre">generate</span></code> with <code class="docutils literal notranslate"><span class="pre">writer</span></code> object to compile the report.</p>
<p>Below is sample to generate report in PDF format:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">xai.formatter</span> <span class="kn">import</span> <span class="n">PdfWriter</span>
<span class="n">report</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">writer</span><span class="o">=</span><span class="n">PdfWriter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;first-sample-report&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;./sample_output&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;report generated : </span><span class="si">%s</span><span class="s2">/sample/output/first-sample-report.pdf&quot;</span> <span class="o">%</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
report generated : /Users/i062308/Development/Explainable_AI/tutorials/formatter/portable_document/sample/output/first-sample-report.pdf
</pre></div></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="(B)-Contents-Examples">
<h2>(B) Contents Examples<a class="headerlink" href="#(B)-Contents-Examples" title="Permalink to this headline">¶</a></h2>
<p>The following section introduces a default design of report, which includes the following parts and each will be shown with a sample dummy data: - <strong>0. Cover page</strong> (display at the beginning of the report but generated at the end of whole process) - <strong>1. Data Analysis</strong> - <strong>2. Feature Analysis</strong> - <strong>3. Training Analysis</strong> - <em>3.1 Hyperparameter Tuning</em> - <em>3.2 Learning Curve (for deep learning)</em> - <strong>4. Evaluation Analysis</strong> - <strong>5. Recommendataion Analysis (TBE)</strong></p>
<p>First load sample data and create a report object :)</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;../../../&#39;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1">### Load Data</span>
<span class="n">training_file_name</span> <span class="o">=</span> <span class="s1">&#39;./../sample_data/titanic.csv&#39;</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">training_file_name</span><span class="p">)</span>
<span class="c1">### Add dummy birthday to demonstrate datetime presentation</span>
<span class="n">bday</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)):</span>
    <span class="n">year</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">1960</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mi">1979</span><span class="p">)</span>
    <span class="n">month</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
    <span class="n">day</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mi">28</span><span class="p">)</span>
    <span class="n">bday</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">10000</span> <span class="o">*</span> <span class="n">year</span> <span class="o">+</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">month</span> <span class="o">+</span> <span class="n">day</span><span class="p">))</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;Birthday&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bday</span>

<span class="n">label_column</span> <span class="o">=</span> <span class="s1">&#39;Survived&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">describe</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;bound method NDFrame.describe of      PassengerId  Survived  Pclass  \
0              1         0       3
1              2         1       1
2              3         1       3
3              4         1       1
4              5         0       3
..           ...       ...     ...
886          887         0       2
887          888         1       1
888          889         0       3
889          890         1       1
890          891         0       3

                                                  Name     Sex   Age  SibSp  \
0                              Braund, Mr. Owen Harris    male  22.0      1
1    Cumings, Mrs. John Bradley (Florence Briggs Th...  female  38.0      1
2                               Heikkinen, Miss. Laina  female  26.0      0
3         Futrelle, Mrs. Jacques Heath (Lily May Peel)  female  35.0      1
4                             Allen, Mr. William Henry    male  35.0      0
..                                                 ...     ...   ...    ...
886                              Montvila, Rev. Juozas    male  27.0      0
887                       Graham, Miss. Margaret Edith  female  19.0      0
888           Johnston, Miss. Catherine Helen &#34;Carrie&#34;  female   NaN      1
889                              Behr, Mr. Karl Howell    male  26.0      0
890                                Dooley, Mr. Patrick    male  32.0      0

     Parch            Ticket     Fare Cabin Embarked  Birthday
0        0         A/5 21171   7.2500   NaN        S  19711019
1        0          PC 17599  71.2833   C85        C  19650717
2        0  STON/O2. 3101282   7.9250   NaN        S  19760919
3        0            113803  53.1000  C123        S  19721004
4        0            373450   8.0500   NaN        S  19680621
..     ...               ...      ...   ...      ...       ...
886      0            211536  13.0000   NaN        S  19661005
887      0            112053  30.0000   B42        S  19710223
888      2        W./C. 6607  23.4500   NaN        S  19650916
889      0            111369  30.0000  C148        C  19640724
890      0            370376   7.7500   NaN        Q  19750302

[891 rows x 13 columns]&gt;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>

<span></span><span class="kn">from</span> <span class="nn">xai.data.constants</span> <span class="kn">import</span> <span class="n">DATATYPE</span>
<span class="kn">from</span> <span class="nn">xai.data</span> <span class="kn">import</span> <span class="n">DataUtil</span>
<span class="kn">from</span> <span class="nn">xai.model.interpreter</span> <span class="kn">import</span> <span class="n">FeatureInterpreter</span>
<span class="kn">from</span> <span class="nn">xai.formatter</span> <span class="kn">import</span> <span class="n">Report</span>

<span class="n">report</span> <span class="o">=</span> <span class="n">Report</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Simple Report&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">report</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;xai.formatter.report.base.Report object at 0x10862cef0&gt;
</pre></div></div>
</div>
<p>When generated, the report name is use as page header:</p>
<p><img alt="Report Header" src="tutorials/formatter/formatter_pdf_images/sample-report-header-2.png" /></p>
<div class="section" id="1.-Data-Analysis">
<h3>1. Data Analysis<a class="headerlink" href="#1.-Data-Analysis" title="Permalink to this headline">¶</a></h3>
<p>The section includes all the information for data analysis. By default, it should have the following information: - Class distribution (for classification problem) - Data field attribute - Data field value distribution - Missing value check</p>
<p>Let’s add paragraph to begin with.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Create Data Analysis Section</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_new_page</span><span class="p">()</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_section_title</span><span class="p">(</span><span class="s2">&quot;Example for Data Analysis &quot;</span><span class="p">)</span>
<span class="c1">### Add Header Level 1</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_1</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Data Analysis&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>When generated, the detail data analysis section will be in the follow format:</p>
<p><img alt="Data Analysis" src="tutorials/formatter/formatter_pdf_images/sample-report-data-analysis-section.png" /></p>
<div class="section" id="1.1-Class-Distribution">
<h4>1.1 Class Distribution<a class="headerlink" href="#1.1-Class-Distribution" title="Permalink to this headline">¶</a></h4>
<p>This section displays the distribution of each class given a label. It’s for classification problem. The detail is created with <code class="docutils literal notranslate"><span class="pre">add_dataset_distribution</span></code>.</p>
<p>A sample is shown as follow:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Add Header Level 2</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_2</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Data Class Distribution&#39;</span><span class="p">)</span>
<span class="c1">### Add Dataset distribution</span>
<span class="n">label_distributions</span> <span class="o">=</span> <span class="n">DataUtil</span><span class="o">.</span><span class="n">get_label_distribution</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label_column</span><span class="p">)</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_data_set_distribution</span><span class="p">(</span><span class="n">label_distributions</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>When generated, the data class distribution content will be in the follow format:</p>
<p><img alt="Data Class Distribution Table" src="tutorials/formatter/formatter_pdf_images/sample-report-data-class-distribution-1.png" /></p>
<p><img alt="Data Class Distribution Bar-Chart" src="tutorials/formatter/formatter_pdf_images/sample-report-data-class-distribution-2.png" /></p>
</div>
<div class="section" id="1.1.1-Retrieve-data-type-and-statictis">
<h4>1.1.1 Retrieve data type and statictis<a class="headerlink" href="#1.1.1-Retrieve-data-type-and-statictis" title="Permalink to this headline">¶</a></h4>
<p>This section displays the attribute for all data fields.</p>
<p>First get the data type and statistic as shown as follow:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Get data types</span>
<span class="n">feature</span><span class="p">,</span> <span class="n">valid_feature_names</span><span class="p">,</span> <span class="n">valid_feature_types</span><span class="p">,</span> <span class="n">meta</span> <span class="o">=</span> <span class="n">DataUtil</span><span class="o">.</span><span class="n">get_column_types</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
                                                                                    <span class="n">threshold</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
                                                                                    <span class="n">label</span><span class="o">=</span><span class="n">label_column</span><span class="p">)</span>
<span class="c1">### Get Data Stats</span>
<span class="n">stats</span> <span class="o">=</span> <span class="n">DataUtil</span><span class="o">.</span><span class="n">get_data_statistics</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
                                     <span class="n">feature_names</span><span class="o">=</span><span class="n">valid_feature_names</span><span class="p">,</span>
                                     <span class="n">feature_types</span><span class="o">=</span><span class="n">valid_feature_types</span><span class="p">,</span>
                                     <span class="n">label</span><span class="o">=</span><span class="n">label_column</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
../../../xai/data/helper.py:148: UserWarning: Warning: the feature [PassengerId] is suspected to be identifierable feature.
[Examples]: [1, 2, 3, 4, 5]

  &#39;[Examples]: %s\n&#39; % (column, col_data.tolist()[:5]))
../../../xai/data/helper.py:148: UserWarning: Warning: the feature [Ticket] is suspected to be identifierable feature.
[Examples]: [&#39;A/5 21171&#39;, &#39;PC 17599&#39;, &#39;STON/O2. 3101282&#39;, &#39;113803&#39;, &#39;373450&#39;]

  &#39;[Examples]: %s\n&#39; % (column, col_data.tolist()[:5]))
../../../xai/data/helper.py:148: UserWarning: Warning: the feature [Cabin] is suspected to be identifierable feature.
[Examples]: [nan, &#39;C85&#39;, nan, &#39;C123&#39;, nan]

  &#39;[Examples]: %s\n&#39; % (column, col_data.tolist()[:5]))
../../../xai/data/helper.py:223: SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: http://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  data[column][data[column].isnull()] = &#39;NAN&#39;
</pre></div></div>
</div>
</div>
<div class="section" id="1.2-Data-Field-Attribute">
<h4>1.2 Data Field Attribute<a class="headerlink" href="#1.2-Data-Field-Attribute" title="Permalink to this headline">¶</a></h4>
<p>This section displays the attribute for all data fields. The content is created with <code class="docutils literal notranslate"><span class="pre">add_data_attributes</span></code>.</p>
<p>The data passed in should be a dict. For each item, the key is the field name, the value is a second-level dict with items of which key is the attribute name and value is the attribute value.</p>
<p>A sample is shown as follow:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Add Header Level 2</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_2</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Data Field Attribute&#39;</span><span class="p">)</span>
<span class="c1">### Data Field Attribute</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_data_attributes</span><span class="p">(</span><span class="n">meta</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>When generated, the data field attribute detail will be in the follow format:</p>
<p><img alt="Data Field Attribute 1" src="tutorials/formatter/formatter_pdf_images/sample-report-data-field-attribute-1.png" /></p>
<p><img alt="Data Field Attribute 2" src="tutorials/formatter/formatter_pdf_images/sample-report-data-field-attribute-2.png" /></p>
</div>
<div class="section" id="1.3-Missing-Value-Check">
<h4>1.3 Missing Value Check<a class="headerlink" href="#1.3-Missing-Value-Check" title="Permalink to this headline">¶</a></h4>
<p>This section displays the missing value checking. The content is created with add_data_missing_value.</p>
<p>The function takes in two inputs: one is <code class="docutils literal notranslate"><span class="pre">missing_count</span></code> which is a dict with items of which key is field name and value is the count or ratio of missing attribute.</p>
<p>A sample is shown as follow:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Add Header Level 2</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_2</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Data Missing Value Check&#39;</span><span class="p">)</span>
<span class="c1">### Missing value count</span>
<span class="n">missing_count</span><span class="p">,</span> <span class="n">total_count</span> <span class="o">=</span> \
<span class="n">DataUtil</span><span class="o">.</span><span class="n">get_missing_value_count</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
                                 <span class="n">feature_names</span><span class="o">=</span><span class="n">valid_feature_names</span><span class="p">,</span>
                                 <span class="n">feature_types</span><span class="o">=</span><span class="n">valid_feature_types</span><span class="p">)</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_data_missing_value</span><span class="p">(</span><span class="n">missing_count</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">missing_count</span><span class="p">),</span>
                                     <span class="n">total_count</span><span class="o">=</span><span class="n">total_count</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>When generated, the data missing value check detail will be in the follow format:</p>
<p><img alt="Data Missing Value" src="tutorials/formatter/formatter_pdf_images/sample-report-data-missing-value.png" /></p>
</div>
<div class="section" id="1.4-Data-Field-Distribution">
<h4>1.4 Data Field Distribution<a class="headerlink" href="#1.4-Data-Field-Distribution" title="Permalink to this headline">¶</a></h4>
<p>This section displays value distribution for data fields. <code class="docutils literal notranslate"><span class="pre">xai.data_explorer</span></code> package analyzes the distribution for the following types: - Categorical - Numerical - Free Text - Datetime</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Add Header Level 2</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_2</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Data Field Distribution&#39;</span><span class="p">)</span>
<span class="c1">### Data Field Distribution Desc</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_paragraph</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;This section displays distribution for categorical fields, numerical fields and text fields.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>When generated, the data field distribution header will be in the follow format:</p>
<p><img alt="Data Field Distribution" src="tutorials/formatter/formatter_pdf_images/sample-report-data-field-distribution.png" /></p>
<div class="section" id="1.4.1-Categorical-Field-Distribution">
<h5>1.4.1 Categorical Field Distribution<a class="headerlink" href="#1.4.1-Categorical-Field-Distribution" title="Permalink to this headline">¶</a></h5>
<p>For categorical field, the value frequency under each label will be shown. See details about <code class="docutils literal notranslate"><span class="pre">xai.data_explorer.categorical_analyzer</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Add Header Level 3</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_3</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Categorical Field Distribution&#39;</span><span class="p">)</span>
<span class="c1">### Categorical field distribution</span>
<span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">feature</span><span class="p">[</span><span class="n">DATATYPE</span><span class="o">.</span><span class="n">CATEGORY</span><span class="p">]:</span>
    <span class="n">labelled_stats</span><span class="p">,</span> <span class="n">all_stats</span> <span class="o">=</span> <span class="n">stats</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
    <span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_categorical_field_distribution</span><span class="p">(</span><span class="n">field_name</span><span class="o">=</span><span class="n">field_name</span><span class="p">,</span> <span class="n">field_distribution</span><span class="o">=</span><span class="n">labelled_stats</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>When generated, the catagorical field distribution detail will be in the follow format:</p>
<p><img alt="Categorical Field Distribution 1" src="tutorials/formatter/formatter_pdf_images/sample-report-data-field-categorical-distribution-1.png" /></p>
<p><img alt="Categorical Field Distribution 2" src="tutorials/formatter/formatter_pdf_images/sample-report-data-field-categorical-distribution-2.png" /></p>
</div>
<div class="section" id="1.4.2-Numerical-Field-Distribution">
<h5>1.4.2 Numerical Field Distribution<a class="headerlink" href="#1.4.2-Numerical-Field-Distribution" title="Permalink to this headline">¶</a></h5>
<p>For numerical fields, the value distribution will shown as histogram and KDE curve. Main statistics (e.g. max, min, mean, median) will also be shown. See details about <code class="docutils literal notranslate"><span class="pre">xai.data_explorer.numerical_analyzer</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Add Header Level 3</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_3</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Numerical Field Distribution&#39;</span><span class="p">)</span>
<span class="c1">### Numerical field distribution</span>
<span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">feature</span><span class="p">[</span><span class="n">DATATYPE</span><span class="o">.</span><span class="n">NUMBER</span><span class="p">]:</span>
    <span class="n">labelled_stats</span><span class="p">,</span> <span class="n">all_stats</span> <span class="o">=</span> <span class="n">stats</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
    <span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_numeric_field_distribution</span><span class="p">(</span><span class="n">field_name</span><span class="o">=</span><span class="n">field_name</span><span class="p">,</span> <span class="n">field_distribution</span><span class="o">=</span><span class="n">labelled_stats</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>When generated, the numerical field distribution detail will be in the follow format:</p>
<p><img alt="Numerical Field Distribution 1" src="tutorials/formatter/formatter_pdf_images/sample-report-data-field-numerical-distribution-1.png" /></p>
<p><img alt="Numerical Field Distribution 2" src="tutorials/formatter/formatter_pdf_images/sample-report-data-field-numerical-distribution-2.png" /></p>
</div>
<div class="section" id="1.4.3-Text-Field-Distribution">
<h5>1.4.3 Text Field Distribution<a class="headerlink" href="#1.4.3-Text-Field-Distribution" title="Permalink to this headline">¶</a></h5>
<p>For text fields, a woldcloud will be shown with a size weigthed on the TF-IDF. Besides, Contextual AI has some pre-defined text patterns, such as <code class="docutils literal notranslate"><span class="pre">Email</span></code>, <code class="docutils literal notranslate"><span class="pre">URL</span></code>, <code class="docutils literal notranslate"><span class="pre">Datetime</span></code>. If the text field is analyzed with Contextual AI Data Explorer package, the percentage of documents contains each pattern will also be analyzed and displayed. See details about <code class="docutils literal notranslate"><span class="pre">xai.data_explorer.text_analyzer</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Add Header Level 3</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_3</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Text Field Distribution&#39;</span><span class="p">)</span>
<span class="c1">### Text field distribution</span>
<span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">feature</span><span class="p">[</span><span class="n">DATATYPE</span><span class="o">.</span><span class="n">FREETEXT</span><span class="p">]:</span>
    <span class="n">labelled_stats</span><span class="p">,</span> <span class="n">all_stats</span> <span class="o">=</span> <span class="n">stats</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
    <span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_text_field_distribution</span><span class="p">(</span><span class="n">field_name</span><span class="o">=</span><span class="n">field_name</span><span class="p">,</span> <span class="n">field_distribution</span><span class="o">=</span><span class="n">labelled_stats</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>When generated, the text field distribution detail will be in the follow format:</p>
<p><img alt="Text Field Distribution 1" src="tutorials/formatter/formatter_pdf_images/sample-report-data-field-text-distribution-1.png" /></p>
<p><img alt="Text Field Distribution 2" src="tutorials/formatter/formatter_pdf_images/sample-report-data-field-text-distribution-2.png" /></p>
</div>
<div class="section" id="1.4.4-DateTime-Field-Distribution">
<h5>1.4.4 DateTime Field Distribution<a class="headerlink" href="#1.4.4-DateTime-Field-Distribution" title="Permalink to this headline">¶</a></h5>
<p>For datetime fields, count on months/years will be show in an barchart. See details about <code class="docutils literal notranslate"><span class="pre">xai.data_explorer.datetime_analyzer</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Add Header Level 3</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_3</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Datetime Field Distribution&#39;</span><span class="p">)</span>
<span class="c1">### Datetime field distribution</span>
<span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">feature</span><span class="p">[</span><span class="n">DATATYPE</span><span class="o">.</span><span class="n">DATETIME</span><span class="p">]:</span>
    <span class="n">labelled_stats</span><span class="p">,</span> <span class="n">all_stats</span> <span class="o">=</span> <span class="n">stats</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
    <span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_datetime_field_distribution</span><span class="p">(</span><span class="n">field_name</span><span class="o">=</span><span class="n">field_name</span><span class="p">,</span> <span class="n">field_distribution</span><span class="o">=</span><span class="n">labelled_stats</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>When generated, the date time field distribution detail will be in the follow format:</p>
<p><img alt="DateTime Field Distribution" src="tutorials/formatter/formatter_pdf_images/sample-report-data-field-datetime-distribution.png" /></p>
</div>
<div class="section" id="1.5:-Generate-the-report">
<h5>1.5: Generate the report<a class="headerlink" href="#1.5:-Generate-the-report" title="Permalink to this headline">¶</a></h5>
<p>At any moment, call <code class="docutils literal notranslate"><span class="pre">generate</span></code> with <code class="docutils literal notranslate"><span class="pre">writer</span></code> object to compile the report. Since, no content is added to overview section - no overview section been generated.</p>
<p>Below is sample to generate report in PDF format:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">xai.formatter</span> <span class="kn">import</span> <span class="n">PdfWriter</span>
<span class="n">report</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">writer</span><span class="o">=</span><span class="n">PdfWriter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;sample-report-with-data-section-only&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;./sample_output&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;report generated : </span><span class="si">%s</span><span class="s2">/sample_output/sample-report-with-data-section-only.pdf&quot;</span> <span class="o">%</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
report generated : /Users/i062308/Development/Explainable_AI/tutorials/formatter/portable_document/sample_output/sample-report-with-data-section-only.pdf
</pre></div></div>
</div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="2.-Feature-Analysis">
<h3>2. Feature Analysis<a class="headerlink" href="#2.-Feature-Analysis" title="Permalink to this headline">¶</a></h3>
<p>This section shows analysis for feature importance. It shows as a barchart and feature importance above a thresdhold as a table. A sample is shown as below:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Create Feature Analysis Section as new page</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_new_page</span><span class="p">()</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_section_title</span><span class="p">(</span><span class="s2">&quot;Example for Feature Analysis &quot;</span><span class="p">)</span>
<span class="c1">### Add Header Level 1</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_1</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Feature Analysis&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>When generated, the content feature analysis section will be in the follow format:</p>
<p><img alt="Feature Analysis" src="tutorials/formatter/formatter_pdf_images/sample-report-feature-analysis-section.png" /></p>
<div class="section" id="2.1-Feature-Importance">
<h4>2.1 Feature Importance<a class="headerlink" href="#2.1-Feature-Importance" title="Permalink to this headline">¶</a></h4>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Add Header Level 2</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_2</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Feature Importance&#39;</span><span class="p">)</span>
<span class="c1">### Feature Importance</span>
<span class="n">path</span> <span class="o">=</span>  <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;./../sample_data/model.pkl&#39;</span><span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
<span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;./../sample_data/train_data.csv&#39;</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
<span class="c1"># -- csv including header --</span>
<span class="n">feature_names</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">columns</span>

<span class="n">fi</span> <span class="o">=</span> <span class="n">FeatureInterpreter</span><span class="p">(</span><span class="n">feature_names</span><span class="o">=</span><span class="n">feature_names</span><span class="p">)</span>
<span class="n">rank</span> <span class="o">=</span> <span class="n">fi</span><span class="o">.</span><span class="n">get_feature_importance_ranking</span><span class="p">(</span><span class="n">trained_model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">train_x</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">)</span>

<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_feature_importance</span><span class="p">(</span><span class="n">importance_ranking</span><span class="o">=</span><span class="n">rank</span><span class="p">,</span> <span class="n">importance_threshold</span><span class="o">=</span><span class="mf">0.005</span><span class="p">)</span>

</pre></div>
</div>
</div>
<p>When generated, the feature importance detail will be in the follow format:</p>
<p><img alt="Feature Importance Figure" src="tutorials/formatter/formatter_pdf_images/sample-report-feature-importance-1.png" /></p>
<p><img alt="Feature Importance Table" src="tutorials/formatter/formatter_pdf_images/sample-report-feature-importance-2.png" /></p>
</div>
<div class="section" id="2.2:-Generate-the-report">
<h4>2.2: Generate the report<a class="headerlink" href="#2.2:-Generate-the-report" title="Permalink to this headline">¶</a></h4>
<p>At any moment, you may call <code class="docutils literal notranslate"><span class="pre">generate</span></code> with <code class="docutils literal notranslate"><span class="pre">writer</span></code> object to compile the report. Since, no content is added to overview section - no overview section been generated.</p>
<p>Below is sample to generate report in PDF format:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">xai.formatter</span> <span class="kn">import</span> <span class="n">PdfWriter</span>
<span class="n">report</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">writer</span><span class="o">=</span><span class="n">PdfWriter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;sample-report-with-data-and-feature-section&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;./sample_output&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;report generated : </span><span class="si">%s</span><span class="s2">/sample_output/sample-report-with-data-and-feature-section.pdf&quot;</span> <span class="o">%</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
report generated : /Users/i062308/Development/Explainable_AI/tutorials/formatter/portable_document/sample_output/sample-report-with-data-and-feature-section.pdf
</pre></div></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="3.-Training-Analysis">
<h3>3. Training Analysis<a class="headerlink" href="#3.-Training-Analysis" title="Permalink to this headline">¶</a></h3>
<p>This section shows training analysis, and presents information while training process.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Create Training Analysis Section as new page</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_new_page</span><span class="p">()</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_section_title</span><span class="p">(</span><span class="s2">&quot;Example for Training Analysis &quot;</span><span class="p">)</span>
<span class="c1">### Add Header Level 1</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_1</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Training Analysis&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>When generated, the detail Training analysis section will be in the follow format:</p>
<p><img alt="Training Analysis" src="tutorials/formatter/formatter_pdf_images/sample-report-training-analysis-section.png" /></p>
<div class="section" id="3.1-Hyperparameter-Tuning">
<h4>3.1 Hyperparameter Tuning<a class="headerlink" href="#3.1-Hyperparameter-Tuning" title="Permalink to this headline">¶</a></h4>
<p>The section shows model metric monitoring while tuning hyperparameters.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Add Header Level 2</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_2</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Hyperparameter Tuning&#39;</span><span class="p">)</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_paragraph</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;this is dummy model, no trained with titanic dataset&#39;</span><span class="p">)</span>
<span class="c1">### Hyperparameter Tuning</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;./../sample_data/hyperparameter_tuning.json&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">hyperparameter_tuning</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;search_space:&#39;</span><span class="p">,</span><span class="n">hyperparameter_tuning</span><span class="p">[</span><span class="s1">&#39;search_space&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;best_idx:&#39;</span><span class="p">,</span><span class="n">hyperparameter_tuning</span><span class="p">[</span><span class="s1">&#39;best_idx&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;history [first 2 samples]:&#39;</span><span class="p">,</span>
      <span class="p">{</span><span class="n">k</span><span class="p">:</span><span class="n">hyperparameter_tuning</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">hyperparameter_tuning</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())[:</span><span class="mi">2</span><span class="p">]})</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;benchmark_metric:&#39;</span><span class="p">,</span><span class="n">hyperparameter_tuning</span><span class="p">[</span><span class="s1">&#39;benchmark_metric&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;benchmark_threshold:&#39;</span><span class="p">,</span><span class="n">hyperparameter_tuning</span><span class="p">[</span><span class="s1">&#39;benchmark_threshold&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;non_hyperopt_score:&#39;</span><span class="p">,</span><span class="n">hyperparameter_tuning</span><span class="p">[</span><span class="s1">&#39;non_hyperopt_score&#39;</span><span class="p">])</span>

<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_hyperparameter_tuning</span><span class="p">(</span><span class="n">history</span><span class="o">=</span><span class="n">hyperparameter_tuning</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">],</span>
                                         <span class="n">best_idx</span><span class="o">=</span><span class="n">hyperparameter_tuning</span><span class="p">[</span><span class="s1">&#39;best_idx&#39;</span><span class="p">],</span>
                                         <span class="n">search_space</span><span class="o">=</span><span class="n">hyperparameter_tuning</span><span class="p">[</span><span class="s1">&#39;search_space&#39;</span><span class="p">],</span>
                                         <span class="n">benchmark_metric</span><span class="o">=</span><span class="n">hyperparameter_tuning</span><span class="p">[</span><span class="s1">&#39;benchmark_metric&#39;</span><span class="p">],</span>
                                         <span class="n">benchmark_threshold</span><span class="o">=</span><span class="n">hyperparameter_tuning</span><span class="p">[</span><span class="s1">&#39;benchmark_threshold&#39;</span><span class="p">],</span>
                                         <span class="n">non_hyperopt_score</span><span class="o">=</span><span class="n">hyperparameter_tuning</span><span class="p">[</span><span class="s1">&#39;non_hyperopt_score&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
search_space: {&#39;NumTrees&#39;: &#39;(20, 500)&#39;, &#39;RandomState&#39;: &#39;(200, 1000)&#39;, &#39;MaxFeature&#39;: &#39;auto&#39;, &#39;MinSplit&#39;: 2, &#39;MaxDepth&#39;: [&#39;None&#39;, 4, 5, 6]}
best_idx: 3
history [first 2 samples]: {&#39;0&#39;: {&#39;params&#39;: {&#39;MaxDepth&#39;: 6, &#39;MaxFeature&#39;: &#39;auto&#39;, &#39;MinSampleSplit&#39;: 2, &#39;NumTrees&#39;: 448.0, &#39;RandomState&#39;: 685.0}, &#39;val_scores&#39;: {&#39;accuracy&#39;: 0.075, &#39;f1&#39;: 0.07493575942773803, &#39;precision&#39;: 0.4217391304347826, &#39;recall&#39;: 0.4342105263157895, &#39;auc&#39;: 0.4009502923976608}}, &#39;1&#39;: {&#39;params&#39;: {&#39;MaxDepth&#39;: 6, &#39;MaxFeature&#39;: &#39;auto&#39;, &#39;MinSampleSplit&#39;: 2, &#39;NumTrees&#39;: 351.0, &#39;RandomState&#39;: 351.0}, &#39;val_scores&#39;: {&#39;accuracy&#39;: 0.0875, &#39;f1&#39;: 0.08748415771107138, &#39;precision&#39;: 0.44510335479498475, &#39;recall&#39;: 0.44078947368421056, &#39;auc&#39;: 0.40570175438596495}}}
benchmark_metric: accuracy
benchmark_threshold: 0.8
non_hyperopt_score: 0.8166666666666667
</pre></div></div>
</div>
<p>When generated, the hyperparameter tuning detail will be in the follow format:</p>
<p><img alt="Hyperparameter Tuning" src="tutorials/formatter/formatter_pdf_images/sample-report-hyperparameter-tuning-1.png" /></p>
<p><img alt="Hyperparameter Tuning Result" src="tutorials/formatter/formatter_pdf_images/sample-report-hyperparameter-tuning-2.png" /></p>
</div>
<div class="section" id="3.2-Learning-Curve-(for-deep-learning)">
<h4>3.2 Learning Curve (for deep learning)<a class="headerlink" href="#3.2-Learning-Curve-(for-deep-learning)" title="Permalink to this headline">¶</a></h4>
<p>The section shows model metric monitoring while training (a.k.a learning curve).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Add Header Level 2</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_2</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Deep Learning Training&#39;</span><span class="p">)</span>
<span class="c1">### Learning Curve</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;./../sample_data/learning_curve.json&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">learning_curve</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;best_idx:&#39;</span><span class="p">,</span><span class="n">learning_curve</span><span class="p">[</span><span class="s1">&#39;best_idx&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;history [first 2 samples]:&#39;</span><span class="p">,</span>
      <span class="p">{</span><span class="n">k</span><span class="p">:</span><span class="n">learning_curve</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">learning_curve</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())[:</span><span class="mi">2</span><span class="p">]})</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;benchmark_metric:&#39;</span><span class="p">,</span><span class="n">learning_curve</span><span class="p">[</span><span class="s1">&#39;benchmark_metric&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;benchmark_threshold:&#39;</span><span class="p">,</span><span class="n">learning_curve</span><span class="p">[</span><span class="s1">&#39;benchmark_threshold&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;training_params:&#39;</span><span class="p">,</span><span class="n">learning_curve</span><span class="p">[</span><span class="s1">&#39;training_params&#39;</span><span class="p">])</span>

<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_learning_curve</span><span class="p">(</span><span class="n">history</span><span class="o">=</span><span class="n">learning_curve</span><span class="p">[</span><span class="s1">&#39;history&#39;</span><span class="p">],</span>
                                  <span class="n">best_idx</span><span class="o">=</span><span class="n">learning_curve</span><span class="p">[</span><span class="s1">&#39;best_idx&#39;</span><span class="p">],</span>
                                  <span class="n">benchmark_metric</span><span class="o">=</span><span class="n">learning_curve</span><span class="p">[</span><span class="s1">&#39;benchmark_metric&#39;</span><span class="p">],</span>
                                  <span class="n">benchmark_threshold</span><span class="o">=</span><span class="n">learning_curve</span><span class="p">[</span><span class="s1">&#39;benchmark_threshold&#39;</span><span class="p">],</span>
                                  <span class="n">training_params</span><span class="o">=</span><span class="n">learning_curve</span><span class="p">[</span><span class="s1">&#39;training_params&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
best_idx: 0
history [first 2 samples]: {&#39;0&#39;: {&#39;val_scores&#39;: {&#39;loss&#39;: 0.769659698009491, &#39;accuracy&#39;: 0.9515625238418579, &#39;precision&#39;: 0.0, &#39;recall&#39;: 0.0, &#39;f1&#39;: 0.0, &#39;auc&#39;: 0.5082619190216064}}, &#39;1&#39;: {&#39;val_scores&#39;: {&#39;loss&#39;: 0.7648007273674011, &#39;accuracy&#39;: 0.948437511920929, &#39;precision&#39;: 0.0, &#39;recall&#39;: 0.0, &#39;f1&#39;: 0.0, &#39;auc&#39;: 0.4868066608905792}}}
benchmark_metric: accuracy
benchmark_threshold: 0.9
training_params: {&#39;Sequence time step&#39;: 15, &#39;Sequence feature length&#39;: 125, &#39;Attribute feature length&#39;: 294, &#39;RNN layer number&#39;: 2, &#39;RNN keep probability&#39;: 0.8, &#39;DNN layer number&#39;: 1, &#39;DNN regularizer&#39;: &#39;L2 (scale: 0.06)&#39;}
</pre></div></div>
</div>
<p>When generated, the learning curve detail will be in the follow format:</p>
<p><img alt="Learning Curve" src="tutorials/formatter/formatter_pdf_images/sample-report-learning-curve-1.png" /></p>
<p><img alt="Learning Curve Result" src="tutorials/formatter/formatter_pdf_images/sample-report-learning-curve-2.png" /></p>
</div>
<div class="section" id="3.3:-Generate-the-report">
<h4>3.3: Generate the report<a class="headerlink" href="#3.3:-Generate-the-report" title="Permalink to this headline">¶</a></h4>
<p>At any moment, you may call <code class="docutils literal notranslate"><span class="pre">generate</span></code> with <code class="docutils literal notranslate"><span class="pre">writer</span></code> object to compile the report. Since, no content is added to overview section - no overview section been generated.</p>
<p>Below is sample to generate report in PDF format:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">xai.formatter</span> <span class="kn">import</span> <span class="n">PdfWriter</span>
<span class="n">report</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">writer</span><span class="o">=</span><span class="n">PdfWriter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;sample-report-with-data-feature-training-section&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;./sample_output&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;report generated : </span><span class="si">%s</span><span class="s2">/sample_output/sample-report-with-data-feature-training-section.pdf&quot;</span> <span class="o">%</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
report generated : /Users/i062308/Development/Explainable_AI/tutorials/formatter/portable_document/sample_output/sample-report-with-data-feature-training-section.pdf
</pre></div></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="4.-Evaluation-Analysis">
<h3>4. Evaluation Analysis<a class="headerlink" href="#4.-Evaluation-Analysis" title="Permalink to this headline">¶</a></h3>
<p>The section provides analysis on evaluation results. It is divided into 2 types: binary classification and multi-class classification. For each case, the following contents are displayed: - numeric metrics - confusion matrix - confidence distribution - reliability diagram (binary classification only)</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Create Evaluation Analysis Section as new page</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_new_page</span><span class="p">()</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_section_title</span><span class="p">(</span><span class="s2">&quot;Example for Evaluation Analysis &quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>When generated, the detail Evaluation analysis section will be in the follow format:</p>
<p><img alt="Evaluation Analysis" src="tutorials/formatter/formatter_pdf_images/sample-report-evaluation-analysis-section.png" /></p>
<div class="section" id="4.1-Binary-Classification">
<h4>4.1 Binary Classification<a class="headerlink" href="#4.1-Binary-Classification" title="Permalink to this headline">¶</a></h4>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Add Header Level 1</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_1</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Binary Classification Evaluation Analysis&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>When generated, the binary classification header will be in the follow format:</p>
<p><img alt="Binary Classification Evaluation" src="tutorials/formatter/formatter_pdf_images/sample-report-binary-classification-evaluation.png" /></p>
<div class="section" id="4.1.1-Numeric-Metric">
<h5>4.1.1 Numeric Metric<a class="headerlink" href="#4.1.1-Numeric-Metric" title="Permalink to this headline">¶</a></h5>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Add Header Level 2</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_2</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Overall Result&#39;</span><span class="p">)</span>
<span class="c1">### Numeric Metric</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;./../sample_data/binary_evaluation_results.json&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">eval_result</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="n">splits</span> <span class="o">=</span> <span class="n">eval_result</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="n">numeric_metrics_list</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="n">splits</span><span class="p">:</span>
    <span class="n">label_eval_result</span> <span class="o">=</span> <span class="n">eval_result</span><span class="p">[</span><span class="n">split</span><span class="p">]</span>
    <span class="k">del</span><span class="p">(</span><span class="n">label_eval_result</span><span class="p">[</span><span class="s1">&#39;vis_result&#39;</span><span class="p">])</span>
    <span class="n">numeric_metrics_list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">split</span><span class="p">,</span> <span class="n">label_eval_result</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">numeric_metrics_list</span><span class="p">)</span>

<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_binary_class_evaluation_metric_results</span><span class="p">(</span><span class="n">numeric_metrics_list</span><span class="p">,</span>
                                                          <span class="n">notes</span><span class="o">=</span><span class="s1">&#39;The section shows general results like accuracy, precision, recall.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[(&#39;train&#39;, {&#39;accuracy&#39;: 0.9627912640571594, &#39;precision&#39;: 0.02666666731238365, &#39;recall&#39;: 0.008547008968889713, &#39;f1&#39;: 0.012944985181093216, &#39;auc&#39;: 0.4609035849571228, &#39;CM&#39;: [[7890, 73], [232, 2]]}), (&#39;validation&#39;, {&#39;accuracy&#39;: 0.9576036930084229, &#39;precision&#39;: 0.0, &#39;recall&#39;: 0.0, &#39;f1&#39;: 0.0, &#39;auc&#39;: 0.4362090826034546, &#39;CM&#39;: [[1039, 14], [32, 0]]}), (&#39;test&#39;, {&#39;accuracy&#39;: 0.962892472743988, &#39;precision&#39;: 0.10000000149011612, &#39;recall&#39;: 0.032258063554763794, &#39;f1&#39;: 0.04878048971295357, &#39;auc&#39;: 0.4682953953742981, &#39;CM&#39;: [[1011, 9], [30, 1]]})]
</pre></div></div>
</div>
<p>When generated, the numeric metric detail will be in the follow format:</p>
<p><img alt="Numeric Metric" src="tutorials/formatter/formatter_pdf_images/sample-report-numeric-metric.png" /></p>
</div>
<div class="section" id="4.1.2-Confusion-Matrix">
<h5>4.1.2 Confusion Matrix<a class="headerlink" href="#4.1.2-Confusion-Matrix" title="Permalink to this headline">¶</a></h5>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Add Header Level 2</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_2</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Confusion Matrix&#39;</span><span class="p">)</span>
<span class="c1">### Confusion Matrix</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;./../sample_data/binary_evaluation_results.json&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">eval_result</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">splits</span> <span class="o">=</span> <span class="n">eval_result</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="n">confusion_matrix_list</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="n">splits</span><span class="p">:</span>
    <span class="n">label_eval_result</span> <span class="o">=</span> <span class="n">eval_result</span><span class="p">[</span><span class="n">split</span><span class="p">]</span>
    <span class="n">confusion_matrix_list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">split</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;labels&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Negative&quot;</span><span class="p">,</span> <span class="s2">&quot;Positive&quot;</span><span class="p">],</span> <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="n">label_eval_result</span><span class="p">[</span><span class="s2">&quot;CM&quot;</span><span class="p">]}))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">confusion_matrix_list</span><span class="p">)</span>

<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_confusion_matrix_results</span><span class="p">(</span><span class="n">confusion_matrix_tuple</span><span class="o">=</span><span class="n">confusion_matrix_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[(&#39;train&#39;, {&#39;labels&#39;: [&#39;Negative&#39;, &#39;Positive&#39;], &#39;values&#39;: [[7890, 73], [232, 2]]}), (&#39;validation&#39;, {&#39;labels&#39;: [&#39;Negative&#39;, &#39;Positive&#39;], &#39;values&#39;: [[1039, 14], [32, 0]]}), (&#39;test&#39;, {&#39;labels&#39;: [&#39;Negative&#39;, &#39;Positive&#39;], &#39;values&#39;: [[1011, 9], [30, 1]]})]
</pre></div></div>
</div>
<p>When generated, the confusion matrix detail will be in the follow format:</p>
<p><img alt="Confusion Matrix" src="tutorials/formatter/formatter_pdf_images/sample-report-confusion-matrix.png" /></p>
</div>
<div class="section" id="4.1.3-Confidence-Distribution">
<h5>4.1.3 Confidence Distribution<a class="headerlink" href="#4.1.3-Confidence-Distribution" title="Permalink to this headline">¶</a></h5>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Add Header Level 2</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_2</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Confidence Distribution&#39;</span><span class="p">)</span>
<span class="c1">### Confidence Distribution</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;./../sample_data/binary_evaluation_results.json&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">eval_result</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="n">splits</span> <span class="o">=</span> <span class="n">eval_result</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="n">probability_plot_list</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="n">splits</span><span class="p">:</span>
    <span class="n">vis_result</span> <span class="o">=</span> <span class="n">eval_result</span><span class="p">[</span><span class="n">split</span><span class="p">][</span><span class="s1">&#39;vis_result&#39;</span><span class="p">]</span>
    <span class="n">probability_plot_list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">split</span><span class="p">,</span> <span class="n">vis_result</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Split name:&#39;</span><span class="p">,</span><span class="n">split</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">vis_result</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; - </span><span class="si">%s</span><span class="s1">:&#39;</span><span class="o">%</span><span class="k">key</span>, type(value), value[:3])

<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_binary_class_confidence_distribution</span><span class="p">(</span><span class="n">probability_plot_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Split name: train
 - probability: &lt;class &#39;list&#39;&gt; [[0.3770688772201538, 0.6229311227798462], [0.41023093461990356, 0.5897691249847412], [0.4822709560394287, 0.5177291035652161]]
 - gt: &lt;class &#39;list&#39;&gt; [0, 0, 0]
Split name: validation
 - probability: &lt;class &#39;list&#39;&gt; [[0.44429945945739746, 0.5557004809379578], [0.5415756702423096, 0.45842432975769043], [0.46190792322158813, 0.5380920171737671]]
 - gt: &lt;class &#39;list&#39;&gt; [0, 0, 0]
Split name: test
 - probability: &lt;class &#39;list&#39;&gt; [[0.4792706072330475, 0.5207294225692749], [0.541035532951355, 0.4589644968509674], [0.47570356726646423, 0.5242964029312134]]
 - gt: &lt;class &#39;list&#39;&gt; [0, 0, 0]
</pre></div></div>
</div>
<p>When generated, the confidence distribution will be in the follow format:</p>
<p><img alt="Confidence Distribution" src="tutorials/formatter/formatter_pdf_images/sample-report-confidence-distribution.png" /></p>
</div>
<div class="section" id="4.1.4-Reliability-Digram">
<h5>4.1.4 Reliability Digram<a class="headerlink" href="#4.1.4-Reliability-Digram" title="Permalink to this headline">¶</a></h5>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Add Header Level 2</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_2</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Reliability Diagram&#39;</span><span class="p">)</span>
<span class="c1">### Reliability Diagram</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;./../sample_data/binary_evaluation_results.json&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">eval_result</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="n">splits</span> <span class="o">=</span> <span class="n">eval_result</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="n">probability_plot_list</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="n">splits</span><span class="p">:</span>
    <span class="n">label_eval_result</span> <span class="o">=</span> <span class="n">eval_result</span><span class="p">[</span><span class="n">split</span><span class="p">][</span><span class="s1">&#39;vis_result&#39;</span><span class="p">]</span>
    <span class="n">probability_plot_list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">split</span><span class="p">,</span> <span class="n">vis_result</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Split name:&#39;</span><span class="p">,</span><span class="n">split</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">vis_result</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; - </span><span class="si">%s</span><span class="s1">:&#39;</span><span class="o">%</span><span class="k">key</span>, type(value), value[:3])

<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_binary_class_reliability_diagram</span><span class="p">(</span><span class="n">probability_plot_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Split name: train
 - probability: &lt;class &#39;list&#39;&gt; [[0.4792706072330475, 0.5207294225692749], [0.541035532951355, 0.4589644968509674], [0.47570356726646423, 0.5242964029312134]]
 - gt: &lt;class &#39;list&#39;&gt; [0, 0, 0]
Split name: validation
 - probability: &lt;class &#39;list&#39;&gt; [[0.4792706072330475, 0.5207294225692749], [0.541035532951355, 0.4589644968509674], [0.47570356726646423, 0.5242964029312134]]
 - gt: &lt;class &#39;list&#39;&gt; [0, 0, 0]
Split name: test
 - probability: &lt;class &#39;list&#39;&gt; [[0.4792706072330475, 0.5207294225692749], [0.541035532951355, 0.4589644968509674], [0.47570356726646423, 0.5242964029312134]]
 - gt: &lt;class &#39;list&#39;&gt; [0, 0, 0]
</pre></div></div>
</div>
<p>When generated, the reliability diagram will be in the follow format:</p>
<p><img alt="Reliability Diagram" src="tutorials/formatter/formatter_pdf_images/sample-report-reliability-diagram.png" /></p>
</div>
</div>
<div class="section" id="4.2-Multi-class-Classification">
<h4>4.2 Multi-class Classification<a class="headerlink" href="#4.2-Multi-class-Classification" title="Permalink to this headline">¶</a></h4>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Add Header Level 1</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_1</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Multi-class Classification Evaluation Analysis&#39;</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;./../sample_data/multi_evaluation_results.json&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">eval_result</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="n">label_key</span> <span class="o">=</span> <span class="s1">&#39;label_1&#39;</span>
<span class="n">label_eval_result</span> <span class="o">=</span> <span class="n">eval_result</span><span class="p">[</span><span class="n">label_key</span><span class="p">]</span>
<span class="n">vis_result</span> <span class="o">=</span> <span class="n">label_eval_result</span><span class="p">[</span><span class="s1">&#39;vis_result&#39;</span><span class="p">]</span>
<span class="k">del</span> <span class="p">(</span><span class="n">label_eval_result</span><span class="p">[</span><span class="s1">&#39;vis_result&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>When generated, the multi-class classification header will be in the follow format:</p>
<p><img alt="Multi-Class Classification Evaluation" src="tutorials/formatter/formatter_pdf_images/sample-report-multi-class-classification-evaluation.png" /></p>
<div class="section" id="4.2.1-Numeric-Metric">
<h5>4.2.1 Numeric Metric<a class="headerlink" href="#4.2.1-Numeric-Metric" title="Permalink to this headline">¶</a></h5>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Add Header Level 2</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_2</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Overall Result&#39;</span><span class="p">)</span>
<span class="c1">### Numeric Metrics</span>
<span class="nb">print</span><span class="p">(</span><span class="n">label_eval_result</span><span class="p">)</span>

<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_multi_class_evaluation_metric_results</span><span class="p">((</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">label_eval_result</span><span class="p">),</span>
                                                        <span class="n">notes</span><span class="o">=</span><span class="s1">&#39;The section shows general results like accuracy, precision, recall.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;f1_score&#39;: {&#39;class&#39;: {&#39;OTHER&#39;: 0.8106060606060606, &#39;PROFANITY&#39;: 0.0, &#39;ABUSE&#39;: 0.43083003952569177, &#39;INSULT&#39;: 0.03529411764705882}, &#39;average&#39;: 0.6306263638637892}, &#39;recall&#39;: {&#39;class&#39;: {&#39;OTHER&#39;: 0.9214208826695371, &#39;PROFANITY&#39;: 0.0, &#39;ABUSE&#39;: 0.3707482993197279, &#39;INSULT&#39;: 0.018633540372670808}, &#39;average&#39;: 0.6894586894586895}, &#39;precision&#39;: {&#39;class&#39;: {&#39;OTHER&#39;: 0.7235841081994928, &#39;PROFANITY&#39;: 0.0, &#39;ABUSE&#39;: 0.5141509433962265, &#39;INSULT&#39;: 0.3333333333333333}, &#39;average&#39;: 0.6246700003863861}, &#39;CM&#39;: {&#39;labels&#39;: [&#39;OTHER&#39;, &#39;PROFANITY&#39;, &#39;ABUSE&#39;, &#39;INSULT&#39;], &#39;values&#39;: [[856, 0, 67, 6], [16, 0, 4, 0], [185, 0, 109, 0], [126, 0, 32, 3]]}}
</pre></div></div>
</div>
<p>When generated, the multi-class numeric metric will be in the follow format:</p>
<p><img alt="Multi Class Metric Result" src="tutorials/formatter/formatter_pdf_images/sample-report-multi-class-numeric-metric.png" /></p>
</div>
<div class="section" id="4.2.2-Confusion-Matrix">
<h5>4.2.2 Confusion Matrix<a class="headerlink" href="#4.2.2-Confusion-Matrix" title="Permalink to this headline">¶</a></h5>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Add Header Level 2</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_2</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Confusion Matrix&#39;</span><span class="p">)</span>
<span class="c1">### Confusion Matrix</span>
<span class="nb">print</span><span class="p">(</span><span class="n">label_eval_result</span><span class="p">[</span><span class="s1">&#39;CM&#39;</span><span class="p">])</span>


<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_confusion_matrix_results</span><span class="p">(</span><span class="n">confusion_matrix_tuple</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">label_eval_result</span><span class="p">[</span><span class="s1">&#39;CM&#39;</span><span class="p">])])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;labels&#39;: [&#39;OTHER&#39;, &#39;PROFANITY&#39;, &#39;ABUSE&#39;, &#39;INSULT&#39;], &#39;values&#39;: [[856, 0, 67, 6], [16, 0, 4, 0], [185, 0, 109, 0], [126, 0, 32, 3]]}
</pre></div></div>
</div>
<p>When generated, the multi-class confusion matrix will be in the follow format:</p>
<p><img alt="Multi Class Confusion Matrix Result" src="tutorials/formatter/formatter_pdf_images/sample-report-multi-class-confusion-matrix.png" /></p>
</div>
<div class="section" id="4.2.3-Confidence-Distribution">
<h5>4.2.3 Confidence Distribution<a class="headerlink" href="#4.2.3-Confidence-Distribution" title="Permalink to this headline">¶</a></h5>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">### Add Header Level 2</span>
<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_header_level_2</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Confidence Distribution&#39;</span><span class="p">)</span>
<span class="c1">###  Probability Plot</span>
<span class="k">for</span> <span class="n">class_name</span><span class="p">,</span> <span class="n">class_value</span> <span class="ow">in</span> <span class="n">vis_result</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Class:&#39;</span><span class="p">,</span><span class="n">class_name</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">class_value</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; - </span><span class="si">%s</span><span class="s1">:&#39;</span><span class="o">%</span><span class="k">key</span>, type(value), value[:4])

<span class="n">report</span><span class="o">.</span><span class="n">detail</span><span class="o">.</span><span class="n">add_multi_class_confidence_distribution</span><span class="p">([(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">vis_result</span><span class="p">)])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Class: OTHER
 - gt: &lt;class &#39;list&#39;&gt; [&#39;OTHER&#39;, &#39;OTHER&#39;, &#39;INSULT&#39;, &#39;OTHER&#39;]
 - probability: &lt;class &#39;list&#39;&gt; [0.8916968852945533, 0.6004393436260155, 0.6709159285290026, 0.8776989624158892]
Class: PROFANITY
 - gt: &lt;class &#39;list&#39;&gt; []
 - probability: &lt;class &#39;list&#39;&gt; []
Class: ABUSE
 - gt: &lt;class &#39;list&#39;&gt; [&#39;ABUSE&#39;, &#39;INSULT&#39;, &#39;OTHER&#39;, &#39;INSULT&#39;]
 - probability: &lt;class &#39;list&#39;&gt; [0.3997915305239952, 0.4321055255119627, 0.4272960507553194, 0.9063218066182464]
Class: INSULT
 - gt: &lt;class &#39;list&#39;&gt; [&#39;INSULT&#39;, &#39;OTHER&#39;, &#39;OTHER&#39;, &#39;OTHER&#39;]
 - probability: &lt;class &#39;list&#39;&gt; [0.4748126330295362, 0.4603932866512729, 0.4276429140622332, 0.3630582608615315]
</pre></div></div>
</div>
<p>When generated, the multi-class confidence distribution will be in the follow format:</p>
<p><img alt="Multi Class Confidence Distribution Result" src="tutorials/formatter/formatter_pdf_images/sample-report-multi-class-confidence-distribution.png" /></p>
</div>
</div>
<div class="section" id="4.3:-Generate-the-report">
<h4>4.3: Generate the report<a class="headerlink" href="#4.3:-Generate-the-report" title="Permalink to this headline">¶</a></h4>
<p>At any moment, you may call <code class="docutils literal notranslate"><span class="pre">generate</span></code> with <code class="docutils literal notranslate"><span class="pre">writer</span></code> object to compile the report. Since, no content is added to overview section - no overview section been generated.</p>
<p>Below is sample to generate report in PDF format:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">xai.formatter</span> <span class="kn">import</span> <span class="n">PdfWriter</span>
<span class="n">report</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">writer</span><span class="o">=</span><span class="n">PdfWriter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;sample-report-with-data-feature-training-evaluation-section&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;report generated : </span><span class="si">%s</span><span class="s2">/sample-report-with-data-feature-training-evaluation-section.pdf&quot;</span> <span class="o">%</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
../../../xai/graphs/graph_generator.py:39: RuntimeWarning: invalid value encountered in double_scalars
  ave_acc = np.sum(accuracy[condition]) / sample_num
/Users/i062308/anaconda3/envs/xai-py37/lib/python3.7/site-packages/numpy/core/fromnumeric.py:3118: RuntimeWarning: Mean of empty slice.
  out=out, **kwargs)
/Users/i062308/anaconda3/envs/xai-py37/lib/python3.7/site-packages/numpy/core/_methods.py:85: RuntimeWarning: invalid value encountered in double_scalars
  ret = ret.dtype.type(ret / rcount)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
report generated : /Users/i062308/Development/Explainable_AI/tutorials/formatter/portable_document/sample-report-with-data-feature-training-evaluation-section.pdf
</pre></div></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="5.-Recommendataion-Analysis-(Optional)">
<h3>5. Recommendataion Analysis (Optional)<a class="headerlink" href="#5.-Recommendataion-Analysis-(Optional)" title="Permalink to this headline">¶</a></h3>
<p>There is a set of content that special design to display summary info, such as: - Summary Notes - Model Information - Timing - Data Summary - Evaluation Result</p>
<p>Please <code class="docutils literal notranslate"><span class="pre">take</span> <span class="pre">note</span></code> that: * It <code class="docutils literal notranslate"><span class="pre">DOES</span> <span class="pre">NOT</span></code> need to be called at the end of pipeline * It can be added in both <code class="docutils literal notranslate"><span class="pre">overview</span></code> and <code class="docutils literal notranslate"><span class="pre">content</span></code> section</p>
<p>Below is sample to demostrate - add summary info to overview section:</p>
<div class="section" id="5.1:-Summary-Notes">
<h4>5.1: Summary Notes<a class="headerlink" href="#5.1:-Summary-Notes" title="Permalink to this headline">¶</a></h4>
<p>Add overview section and simple summary as paragraph into overview.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">report</span><span class="o">.</span><span class="n">overview</span><span class="o">.</span><span class="n">add_section_title</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Overview&quot;</span><span class="p">)</span>
<span class="n">summary_notes_text</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;This report serves as a demo for the Contextual AI library.</span>
<span class="s1">The data used to generate this report is not from any specific use case.</span>
<span class="s1">Sorry for any inconsistency in the report data.</span>
<span class="s1">&#39;&#39;&#39;</span>
<span class="n">report</span><span class="o">.</span><span class="n">overview</span><span class="o">.</span><span class="n">add_paragraph</span><span class="p">(</span><span class="n">summary_notes_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>When generated, the summary paragraph (example as first content) will be in the follow format:</p>
<p><img alt="Summary Paragraph" src="tutorials/formatter/formatter_pdf_images/sample-report-summary-paragraph.png" /></p>
</div>
<div class="section" id="5.2:-Model-Information">
<h4>5.2: Model Information<a class="headerlink" href="#5.2:-Model-Information" title="Permalink to this headline">¶</a></h4>
<p>The content is created by <code class="docutils literal notranslate"><span class="pre">add_model_info_summary</span></code>. It is designed to display the basid model information, such as <code class="docutils literal notranslate"><span class="pre">model_id</span></code>, <code class="docutils literal notranslate"><span class="pre">model_version</span></code> or any information specific to this training.</p>
<p>The data should be passed in as a list of tuple, each tuple will be a key-value pair. If no data is provided to the content, <code class="docutils literal notranslate"><span class="pre">usecase_name</span></code>, <code class="docutils literal notranslate"><span class="pre">version</span></code>, <code class="docutils literal notranslate"><span class="pre">usecase_team</span></code> will be displayed as a default information. A sample is shown as follows:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">model_info</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;Model ID&#39;</span><span class="p">,</span><span class="s1">&#39;12345678&#39;</span><span class="p">),</span>
              <span class="p">(</span><span class="s1">&#39;Model Version&#39;</span><span class="p">,</span><span class="s1">&#39;v6&#39;</span><span class="p">),</span>
              <span class="p">(</span><span class="s1">&#39;Scenario ID&#39;</span><span class="p">,</span><span class="s1">&#39;111222333444555&#39;</span><span class="p">),</span>
              <span class="p">(</span><span class="s1">&#39;Notes&#39;</span><span class="p">,</span><span class="s1">&#39;This model is created as a beta version.&#39;</span><span class="p">)</span>
             <span class="p">]</span>
<span class="n">report</span><span class="o">.</span><span class="n">overview</span><span class="o">.</span><span class="n">add_model_info_summary</span><span class="p">(</span><span class="n">model_info</span><span class="o">=</span><span class="n">model_info</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>When generated, the Model Info summary will be in the follow format:</p>
<p><img alt="Model Info Summary" src="tutorials/formatter/formatter_pdf_images/sample-report-model-info-summary.png" /></p>
</div>
<div class="section" id="5.3:-Timing">
<h4>5.3: Timing<a class="headerlink" href="#5.3:-Timing" title="Permalink to this headline">¶</a></h4>
<p>The content is created by <code class="docutils literal notranslate"><span class="pre">add_training_timing</span></code>. It is designed to display the time spend at each stage of the training process, such as <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">processing</span></code>, <code class="docutils literal notranslate"><span class="pre">feature</span> <span class="pre">extraction</span></code>, <code class="docutils literal notranslate"><span class="pre">training</span> <span class="pre">model</span></code> and <code class="docutils literal notranslate"><span class="pre">evaluation</span></code>.</p>
<p>The data should be passed in as a list of tuple, each tuple will be a pair of stage name and time spend in seconds. A sample is shown as follows:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">timing</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;Data Preprocessing&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">),</span>
          <span class="p">(</span><span class="s1">&#39;Feature Engineering&#39;</span><span class="p">,</span> <span class="mi">10000</span><span class="p">),</span>
          <span class="p">(</span><span class="s1">&#39;Training&#39;</span><span class="p">,</span> <span class="mi">200200</span><span class="p">),</span>
          <span class="p">(</span><span class="s1">&#39;Evaluation&#39;</span><span class="p">,</span> <span class="mi">30303</span><span class="p">)]</span>
<span class="n">report</span><span class="o">.</span><span class="n">overview</span><span class="o">.</span><span class="n">add_training_timing</span><span class="p">(</span><span class="n">timing</span><span class="o">=</span><span class="n">timing</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>When generated, the Training Timing summary will be in the follow format:</p>
<p><img alt="Training Time Summary" src="tutorials/formatter/formatter_pdf_images/sample-report-training-time-summary.png" /></p>
</div>
<div class="section" id="5.4:-Data-Summary">
<h4>5.4: Data Summary<a class="headerlink" href="#5.4:-Data-Summary" title="Permalink to this headline">¶</a></h4>
<p>The content is created by <code class="docutils literal notranslate"><span class="pre">add_data_set_summary</span></code>. It is designed to display the quantity of samples used in each stage of training (a.k.a training, validation, testing). It can also be used to display the distribution among different classes.</p>
<p>The data should be passed in as a list of tuple, each tuple will be a pair of dataset name and quantity. A sample is shown as follows:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">data_summary</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;training&#39;</span><span class="p">,</span> <span class="mi">10000</span><span class="p">),</span>
                <span class="p">(</span><span class="s1">&#39;validation&#39;</span><span class="p">,</span> <span class="mi">2000</span><span class="p">),</span>
                <span class="p">(</span><span class="s1">&#39;testing&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)]</span>
<span class="n">report</span><span class="o">.</span><span class="n">overview</span><span class="o">.</span><span class="n">add_data_set_summary</span><span class="p">(</span><span class="n">data_summary</span><span class="o">=</span><span class="n">data_summary</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>When generated, the Dataset summary will be in the follow format:</p>
<p><img alt="Dataset Summary" src="tutorials/formatter/formatter_pdf_images/sample-report-data-set-summary.png" /></p>
</div>
<div class="section" id="5.5:-Evaluation-Result-Summary">
<h4>5.5: Evaluation Result Summary<a class="headerlink" href="#5.5:-Evaluation-Result-Summary" title="Permalink to this headline">¶</a></h4>
<p>The content is created by <code class="docutils literal notranslate"><span class="pre">add_evaluation_result_summary</span></code>. It is designed to display the summary on evaluation result in a high-level. Only numeric metrics will be displayed, anything involves a list won’t be shown in summary. For example, for multi-class classification, only the average metrics will be shown, also metric such like ROC and confusion matrix won’t be shown here.</p>
<p>The data should be passed in as a list of dict, each dict includes evaluation on one objective. For example, in a multi-label classication or multi-task machine learning problem, each dict will only regards on one label or one task. The function takes in as many as dict and display each of them in sequence.</p>
<p>For each dict, each key-value pair should about a metric or an attribute. - If the value is a number or a str, the key-value pair will be displayed - If the value is a list, it will be ignored in display. - If the value is dict, the function will search the keyword <code class="docutils literal notranslate"><span class="pre">average</span></code> to display the average metric; otherwise, search the keyword <code class="docutils literal notranslate"><span class="pre">class</span></code> and calculate a macro average if it’s a list of float. For other cases, the function will ignore this item.</p>
<p>A sample is shown as follows:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;./../sample_data/evaluation_result_summary.json&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">evaluation_result_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">evaluation_result_data</span><span class="p">)</span>

<span class="n">report</span><span class="o">.</span><span class="n">overview</span><span class="o">.</span><span class="n">add_evaluation_result_summary</span><span class="p">(</span><span class="n">evaluation_result</span><span class="o">=</span><span class="n">evaluation_result_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[{&#39;field&#39;: &#39;Category I&#39;, &#39;labels&#39;: &#39;OTHER, OFFENSE&#39;, &#39;f1_score&#39;: {&#39;class&#39;: {&#39;OTHER&#39;: 0.7871690427698573, &#39;OFFENSE&#39;: 0.504739336492891}, &#39;average&#39;: 0.6916176820280062}, &#39;recall&#39;: {&#39;class&#39;: {&#39;OTHER&#39;: 0.8320775026910656, &#39;OFFENSE&#39;: 0.44842105263157894}, &#39;average&#39;: 0.7022792022792023}, &#39;precision&#39;: {&#39;class&#39;: {&#39;OTHER&#39;: 0.7468599033816425, &#39;OFFENSE&#39;: 0.5772357723577236}, &#39;average&#39;: 0.6894728220167127}}, {&#39;field&#39;: &#39;Category II&#39;, &#39;labels&#39;: &#39;OTHER, PROFANITY, ABUSE, INSULT&#39;, &#39;f1_score&#39;: {&#39;class&#39;: {&#39;OTHER&#39;: 0.8106060606060606, &#39;PROFANITY&#39;: 0.0, &#39;ABUSE&#39;: 0.43083003952569177, &#39;INSULT&#39;: 0.03529411764705882}, &#39;average&#39;: 0.6306263638637892}, &#39;recall&#39;: {&#39;class&#39;: {&#39;OTHER&#39;: 0.9214208826695371, &#39;PROFANITY&#39;: 0.0, &#39;ABUSE&#39;: 0.3707482993197279, &#39;INSULT&#39;: 0.018633540372670808}, &#39;average&#39;: 0.6894586894586895}, &#39;precision&#39;: {&#39;class&#39;: {&#39;OTHER&#39;: 0.7235841081994928, &#39;PROFANITY&#39;: 0.0, &#39;ABUSE&#39;: 0.5141509433962265, &#39;INSULT&#39;: 0.3333333333333333}, &#39;average&#39;: 0.6246700003863861}}]
</pre></div></div>
</div>
<p>When generated, the Evaluation Result summary will be in the follow format:</p>
<p><img alt="Validate Result Summary" src="tutorials/formatter/formatter_pdf_images/sample-report-evaluation-result-summary.png" /></p>
</div>
<div class="section" id="5.6:-Generate-the-report">
<h4>5.6: Generate the report<a class="headerlink" href="#5.6:-Generate-the-report" title="Permalink to this headline">¶</a></h4>
<p>At any moment, you may call <code class="docutils literal notranslate"><span class="pre">generate</span></code> with <code class="docutils literal notranslate"><span class="pre">writer</span></code> object to compile the report. The program will put all the contents added to report section (<code class="docutils literal notranslate"><span class="pre">overview</span></code> and <code class="docutils literal notranslate"><span class="pre">content</span></code>) and create content table (if enabled).</p>
<p>Below is sample to generate report in PDF format:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">xai.formatter</span> <span class="kn">import</span> <span class="n">PdfWriter</span>
<span class="n">report</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">writer</span><span class="o">=</span><span class="n">PdfWriter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;sample-report-final-with-summary&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;./sample_output&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;report generated : </span><span class="si">%s</span><span class="s2">/sample_output/sample-report-final-with-summary.pdf&quot;</span> <span class="o">%</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
report generated : /Users/i062308/Development/Explainable_AI/tutorials/formatter/portable_document/sample_output/sample-report-final-with-summary.pdf
</pre></div></div>
</div>
<hr class="docutils" />
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tutorial_html_report_generation.html" class="btn btn-neutral float-right" title="HTML Report Generation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../../formatter_module_tutorial.html" class="btn btn-neutral float-left" title="Contextual AI formatter tutorials" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Wang Jin, Sean Saito, Chai Wei Tah, Ni Peng, Shu Zhen, Karthik Muthuswamy, Amrit Raj

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>